mads 2.0.6 build 58 (28 Jan 17)
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\aaaa1.asm
     1 					ICL 'macro.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm
     1 				.MACRO REG_PUSH 
     2 					pha
     3 					txa
     4 					pha
     5 					tya
     6 					pha
     7 				.ENDM
     8
     9 				.MACRO REG_PULL
    10 					pla
    11 					tay
    12 					pla
    13 					tax
    14 					pla
    15 				.ENDM
    16
    17 				.MACRO SLEEP frames
    18 					lda RTCLOCK_0
    19 					add #:frames
    20 				SLEEP_LOOP:
    21 					cmp RTCLOCK_0
    22 					bne SLEEP_LOOP
    23 				.ENDM
    24
    25 				.MACRO LINE_SPACE_9_CYCLES
    26 					nop
    27 					nop
    28 					nop
    29 					sta bar_color20	; 3 cycles
    30 				.ENDM
    31
    32 				.MACRO LINE_SPACE_10_CYCLES
    33 					nop
    34 					nop
    35 					nop
    36 					nop
    37 					nop
    38 				.ENDM
    39
    40 				.MACRO LINE_SPACE_11_CYCLES
    41 					nop
    42 					nop
    43 					nop
    44 					nop
    45 					sta bar_color20	; 3 cycles
    46 				.ENDM
    47
    48 				.MACRO LINE_WAIT
    49 					sta WSYNC	;WAIT
    50 				.ENDM
    51
    52 				.MACRO LINE_COLOR_CALC
    53 					dex
    54 					dey
    55 				.ENDM
    56
    57 				.MACRO LINE_NOP_HALF
    58 					LINE_WAIT
    59 				
    60 					;; 4 nops
    61 					LINE_COLOR_CALC
    62 					
    63 					LINE_NOP_SPACE_1
    64 					
    65 					sta bar_color20	; 3 cycles
    66 					stx DLI_PAPER	; 4 cycles
    67 				;	stx DLI_PEN	; 4 cycles
    68 					LINE_NOP_SPACE_2
    69 					sty DLI_PAPER	; 4 cycles
    70 				;	sty DLI_PEN	; 4 cycles
    71 				.ENDM
    72
    73 				.MACRO LINE_NOP_NORMAL
    74 					LINE_WAIT
    75 					LINE_COLOR_CALC
    76 					sty COLPM0
    77 					sty COLPM1
    78 					stx COLPM2
    79 					stx COLPM3
    80 					stx DLI_PAPER	; 4 cycles
    81 					LINE_SPACE_10_CYCLES
    82 					nop
    83 					sty DLI_PAPER	; 4 cycles
    84 				.ENDM
    85
    86 				.MACRO LINE_NOP_SHORT
    87 					LINE_WAIT
    88 					LINE_COLOR_CALC
    89 					sty COLPM0
    90 					sty COLPM1
    91 					stx COLPM2
    92 					stx COLPM3
    93 					stx DLI_PAPER	; 4 cycles
    94 					LINE_SPACE_10_CYCLES
    95 					sty DLI_PAPER	; 4 cycles
    96 				.ENDM
    97
    98 				.MACRO LINE_NOP_LAST
    99 					LINE_WAIT
   100 					stx DLI_PAPER	; 4 cycles
   101 					lda #1
   102 					sta COLPM0
   103 					sta COLPM1
   104 					sta COLPM2
   105 					sta COLPM3
   106 					LINE_SPACE_10_CYCLES
   107 					nop
   108 					sty DLI_PAPER	; 4 cycles
   109 				.ENDM
   110
   111 				.MACRO DLI_ENABLE handler
   112 					mwa #:handler VDSLST
   113 					lda #$c0
   114 					sta NMIEN
   115 				.ENDM
   116
   117 				.MACRO DLI_DISABLE
   118 					lda #$40
   119 					sta NMIEN
   120 				.ENDM
     2
     3 					org $2000
     4
     5 					.proc main
     6 					
     7 FFFF> 2000-2415> 20 98 + 	jsr dl_set_mode
     8 					
     9 2003 20 0D 20			jsr zx
    10
    11 2006 20 98 39			jsr dl_set_mode
    12
    13 2009 20 07 68			jsr part1
    14 					
    15 200C 60				rts
    16
    17 					.endp
    18 					
    19 200D				ICL 'zx.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx.asm
     1 200D			zx:
     2 200D A9 00			lda #COLOR_BLACK     
     3 200F 8D C5 02			sta GR8_PEN
     4 2012 A9 0E			lda #COLOR_WHITE     
     5 2014 8D C6 02			sta GR8_PAPER
     6 2017 A9 0E			lda #COLOR_WHITE     
     7 2019 8D C8 02			sta GR8_FRAME
     8
     9 201C 20 75 8C			jsr screen_set_write_2
    10 201F 20 6A 8C			jsr screen_set_read_2
    11 					
    12 2022			zx_loop:
    13
    14 2022				ICL "zx_boot.asm"
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
     1 2022 A9 0E			lda #COLOR_WHITE
     2 2024 8D C8 02			sta GR8_FRAME
     3 2027 20 2B 8C			jsr screen_fill
     4 202A				SLEEP 50
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 202A A5 14			lda RTCLOCK_0
     2 202C 18 69 32			add #50
     3 202F			SLEEP_LOOP:
     4 202F C5 14			cmp RTCLOCK_0
     5 2031 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
     5 2033 20 02 8C			jsr screen_clear
     6 					
     7 2036				MEMCOPY_BLOCK image_data_sinclair_research screen_mem_zx
Macro: MEMCOPY_BLOCK [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\func.asm]
     1 2036 A9 00 85 EF A9 88 + 	mwa #IMAGE_DATA_SINCLAIR_RESEARCH memcopy_block_src
     2 203E A9 00 85 F1 A9 87 + 	mwa #SCREEN_MEM_ZX memcopy_block_dst
     4 2046 20 02 24			jsr memcopy_block_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
     8 2049				SLEEP 50
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 2049 A5 14			lda RTCLOCK_0
     2 204B 18 69 32			add #50
     3 204E			SLEEP_LOOP:
     4 204E C5 14			cmp RTCLOCK_0
     5 2050 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
     9
    10 2052 20 02 8C			jsr screen_clear
    11 				;	MEMCOPY_BLOCK image_data_load_pp_L screen_mem_zx
    12 				;	SLEEP 50
    13 					
    14 2055				ZX_PRINT 'L'-32 0 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 2055 A9 2C			lda #'L'-32
     2 2057 A2 00			ldx #0
     3 2059 A0 17			ldy #23
     4 205B 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    15 205E				ZX_PRINT 'O'-32 1 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 205E A9 2F			lda #'O'-32
     2 2060 A2 01			ldx #1
     3 2062 A0 17			ldy #23
     4 2064 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    16 2067				ZX_PRINT 'A'-32 2 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 2067 A9 21			lda #'A'-32
     2 2069 A2 02			ldx #2
     3 206B A0 17			ldy #23
     4 206D 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    17 2070				ZX_PRINT 'D'-32 3 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 2070 A9 24			lda #'D'-32
     2 2072 A2 03			ldx #3
     3 2074 A0 17			ldy #23
     4 2076 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    18 2079				ZX_PRINT ' '-32 4 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 2079 A9 00			lda #' '-32
     2 207B A2 04			ldx #4
     3 207D A0 17			ldy #23
     4 207F 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    19 2082				ZX_PRINT_INV 'L'-32 5 23
Macro: ZX_PRINT_INV [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 2082 A9 2C			lda #'L'-32
     2 2084 A2 05			ldx #5
     3 2086 A0 17			ldy #23
     4 2088 20 3A 23			jsr zx_print_inv_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    20 208B				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 208B A5 14			lda RTCLOCK_0
     2 208D 18 69 19			add #25
     3 2090			SLEEP_LOOP:
     4 2090 C5 14			cmp RTCLOCK_0
     5 2092 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    21 2094				ZX_PRINT 'L'-32 5 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 2094 A9 2C			lda #'L'-32
     2 2096 A2 05			ldx #5
     3 2098 A0 17			ldy #23
     4 209A 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    22 209D				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 209D A5 14			lda RTCLOCK_0
     2 209F 18 69 19			add #25
     3 20A2			SLEEP_LOOP:
     4 20A2 C5 14			cmp RTCLOCK_0
     5 20A4 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    23 20A6				ZX_PRINT_INV 'L'-32 5 23
Macro: ZX_PRINT_INV [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 20A6 A9 2C			lda #'L'-32
     2 20A8 A2 05			ldx #5
     3 20AA A0 17			ldy #23
     4 20AC 20 3A 23			jsr zx_print_inv_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    24 20AF				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 20AF A5 14			lda RTCLOCK_0
     2 20B1 18 69 19			add #25
     3 20B4			SLEEP_LOOP:
     4 20B4 C5 14			cmp RTCLOCK_0
     5 20B6 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    25 20B8				ZX_PRINT 'L'-32 5 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 20B8 A9 2C			lda #'L'-32
     2 20BA A2 05			ldx #5
     3 20BC A0 17			ldy #23
     4 20BE 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    26 20C1				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 20C1 A5 14			lda RTCLOCK_0
     2 20C3 18 69 19			add #25
     3 20C6			SLEEP_LOOP:
     4 20C6 C5 14			cmp RTCLOCK_0
     5 20C8 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    27 20CA				ZX_PRINT '"'-32 5 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 20CA A9 02			lda #'"'-32
     2 20CC A2 05			ldx #5
     3 20CE A0 17			ldy #23
     4 20D0 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    28 20D3				ZX_PRINT_INV 'L'-32 6 23
Macro: ZX_PRINT_INV [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 20D3 A9 2C			lda #'L'-32
     2 20D5 A2 06			ldx #6
     3 20D7 A0 17			ldy #23
     4 20D9 20 3A 23			jsr zx_print_inv_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    29 20DC				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 20DC A5 14			lda RTCLOCK_0
     2 20DE 18 69 19			add #25
     3 20E1			SLEEP_LOOP:
     4 20E1 C5 14			cmp RTCLOCK_0
     5 20E3 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    30 20E5				ZX_PRINT '"'-32 6 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 20E5 A9 02			lda #'"'-32
     2 20E7 A2 06			ldx #6
     3 20E9 A0 17			ldy #23
     4 20EB 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    31 20EE				ZX_PRINT_INV 'L'-32 7 23
Macro: ZX_PRINT_INV [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 20EE A9 2C			lda #'L'-32
     2 20F0 A2 07			ldx #7
     3 20F2 A0 17			ldy #23
     4 20F4 20 3A 23			jsr zx_print_inv_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    32 20F7				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 20F7 A5 14			lda RTCLOCK_0
     2 20F9 18 69 19			add #25
     3 20FC			SLEEP_LOOP:
     4 20FC C5 14			cmp RTCLOCK_0
     5 20FE D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    33 2100				ZX_PRINT 'L'-32 7 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 2100 A9 2C			lda #'L'-32
     2 2102 A2 07			ldx #7
     3 2104 A0 17			ldy #23
     4 2106 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    34 2109				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 2109 A5 14			lda RTCLOCK_0
     2 210B 18 69 19			add #25
     3 210E			SLEEP_LOOP:
     4 210E C5 14			cmp RTCLOCK_0
     5 2110 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    35 2112				ZX_PRINT_INV 'L'-32 7 23
Macro: ZX_PRINT_INV [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 2112 A9 2C			lda #'L'-32
     2 2114 A2 07			ldx #7
     3 2116 A0 17			ldy #23
     4 2118 20 3A 23			jsr zx_print_inv_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    36 211B				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 211B A5 14			lda RTCLOCK_0
     2 211D 18 69 19			add #25
     3 2120			SLEEP_LOOP:
     4 2120 C5 14			cmp RTCLOCK_0
     5 2122 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    37 2124				ZX_PRINT 'L'-32 7 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 2124 A9 2C			lda #'L'-32
     2 2126 A2 07			ldx #7
     3 2128 A0 17			ldy #23
     4 212A 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    38 212D				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 212D A5 14			lda RTCLOCK_0
     2 212F 18 69 19			add #25
     3 2132			SLEEP_LOOP:
     4 2132 C5 14			cmp RTCLOCK_0
     5 2134 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_boot.asm
    39 					
    40 					
    41 					
    15 2136				ICL "zx_load.asm"	
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
     1 2136 20 02 8C			jsr screen_clear
     2 					
     3 2139				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 2139 A5 14			lda RTCLOCK_0
     2 213B 18 69 19			add #25
     3 213E			SLEEP_LOOP:
     4 213E C5 14			cmp RTCLOCK_0
     5 2140 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
     4 2142 A9 AC			lda #COLOR_CYAN
     5 2144 8D C8 02			sta GR8_FRAME
     6 2147				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 2147 A5 14			lda RTCLOCK_0
     2 2149 18 69 19			add #25
     3 214C			SLEEP_LOOP:
     4 214C C5 14			cmp RTCLOCK_0
     5 214E D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
     7 2150 A9 0E			lda #COLOR_WHITE
     8 2152 8D C8 02			sta GR8_FRAME
     9 					
    10 2155				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 2155 A5 14			lda RTCLOCK_0
     2 2157 18 69 19			add #25
     3 215A			SLEEP_LOOP:
     4 215A C5 14			cmp RTCLOCK_0
     5 215C D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    11 215E A9 AC			lda #COLOR_CYAN
    12 2160 8D C8 02			sta GR8_FRAME
    13 2163				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 2163 A5 14			lda RTCLOCK_0
     2 2165 18 69 19			add #25
     3 2168			SLEEP_LOOP:
     4 2168 C5 14			cmp RTCLOCK_0
     5 216A D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    14 216C A9 0E			lda #COLOR_WHITE
    15 216E 8D C8 02			sta GR8_FRAME
    16
    17 2171				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 2171 A5 14			lda RTCLOCK_0
     2 2173 18 69 19			add #25
     3 2176			SLEEP_LOOP:
     4 2176 C5 14			cmp RTCLOCK_0
     5 2178 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    18 217A A9 AC			lda #COLOR_CYAN
    19 217C 8D C8 02			sta GR8_FRAME
    20
    21 217F				DLI_ENABLE zx_dli_header_block
Macro: DLI_ENABLE [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 217F A9 2D 8D 00 02 A9 + 	mwa #ZX_DLI_HEADER_BLOCK VDSLST
     2 2189 A9 C0			lda #$c0
     3 218B 8D 0E D4			sta NMIEN
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    22 218E				SLEEP 175
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 218E A5 14			lda RTCLOCK_0
     2 2190 18 69 AF			add #175
     3 2193			SLEEP_LOOP:
     4 2193 C5 14			cmp RTCLOCK_0
     5 2195 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    23 2197				DLI_DISABLE
Macro: DLI_DISABLE [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 2197 A9 40			lda #$40
     2 2199 8D 0E D4			sta NMIEN
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    24 					
    25 219C				ZX_PRINT 'P'-32 0 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 219C A9 30			lda #'P'-32
     2 219E A2 00			ldx #0
     3 21A0 A0 00			ldy #0
     4 21A2 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    26 21A5				ZX_PRINT 'r'-32 1 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 21A5 A9 52			lda #'r'-32
     2 21A7 A2 01			ldx #1
     3 21A9 A0 00			ldy #0
     4 21AB 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    27 21AE				ZX_PRINT 'o'-32 2 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 21AE A9 4F			lda #'o'-32
     2 21B0 A2 02			ldx #2
     3 21B2 A0 00			ldy #0
     4 21B4 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    28 21B7				ZX_PRINT 'g'-32 3 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 21B7 A9 47			lda #'g'-32
     2 21B9 A2 03			ldx #3
     3 21BB A0 00			ldy #0
     4 21BD 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    29 21C0				ZX_PRINT 'r'-32 4 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 21C0 A9 52			lda #'r'-32
     2 21C2 A2 04			ldx #4
     3 21C4 A0 00			ldy #0
     4 21C6 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    30 21C9				ZX_PRINT 'a'-32 5 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 21C9 A9 41			lda #'a'-32
     2 21CB A2 05			ldx #5
     3 21CD A0 00			ldy #0
     4 21CF 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    31 21D2				ZX_PRINT 'm'-32 6 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 21D2 A9 4D			lda #'m'-32
     2 21D4 A2 06			ldx #6
     3 21D6 A0 00			ldy #0
     4 21D8 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    32 21DB				ZX_PRINT ':'-32 7 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 21DB A9 1A			lda #':'-32
     2 21DD A2 07			ldx #7
     3 21DF A0 00			ldy #0
     4 21E1 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    33 					
    34 21E4				ZX_PRINT 'R'-32 9 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 21E4 A9 32			lda #'R'-32
     2 21E6 A2 09			ldx #9
     3 21E8 A0 00			ldy #0
     4 21EA 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    35 21ED				ZX_PRINT 'A'-32 10 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 21ED A9 21			lda #'A'-32
     2 21EF A2 0A			ldx #10
     3 21F1 A0 00			ldy #0
     4 21F3 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    36 21F6				ZX_PRINT 'I'-32 11 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 21F6 A9 29			lda #'I'-32
     2 21F8 A2 0B			ldx #11
     3 21FA A0 00			ldy #0
     4 21FC 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    37 21FF				ZX_PRINT 'N'-32 12 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 21FF A9 2E			lda #'N'-32
     2 2201 A2 0C			ldx #12
     3 2203 A0 00			ldy #0
     4 2205 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    38 2208				ZX_PRINT 'B'-32 13 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 2208 A9 22			lda #'B'-32
     2 220A A2 0D			ldx #13
     3 220C A0 00			ldy #0
     4 220E 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    39 2211				ZX_PRINT 'O'-32 14 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 2211 A9 2F			lda #'O'-32
     2 2213 A2 0E			ldx #14
     3 2215 A0 00			ldy #0
     4 2217 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    40 221A				ZX_PRINT 'W'-32 15 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 221A A9 37			lda #'W'-32
     2 221C A2 0F			ldx #15
     3 221E A0 00			ldy #0
     4 2220 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    41 2223				ZX_PRINT 'O'-32 16 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 2223 A9 2F			lda #'O'-32
     2 2225 A2 10			ldx #16
     3 2227 A0 00			ldy #0
     4 2229 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    42 222C				ZX_PRINT 'M'-32 17 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 222C A9 2D			lda #'M'-32
     2 222E A2 11			ldx #17
     3 2230 A0 00			ldy #0
     4 2232 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    43 2235				ZX_PRINT 'I'-32 18 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 2235 A9 29			lda #'I'-32
     2 2237 A2 12			ldx #18
     3 2239 A0 00			ldy #0
     4 223B 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    44 223E				ZX_PRINT 'T'-32 19 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm]
     1 223E A9 34			lda #'T'-32
     2 2240 A2 13			ldx #19
     3 2242 A0 00			ldy #0
     4 2244 20 74 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    45 2247				SLEEP 100
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 2247 A5 14			lda RTCLOCK_0
     2 2249 18 69 64			add #100
     3 224C			SLEEP_LOOP:
     4 224C C5 14			cmp RTCLOCK_0
     5 224E D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    46 					
    47 2250				DLI_ENABLE zx_dli_data_block
Macro: DLI_ENABLE [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 2250 A9 67 8D 00 02 A9 + 	mwa #ZX_DLI_DATA_BLOCK VDSLST
     2 225A A9 C0			lda #$c0
     3 225C 8D 0E D4			sta NMIEN
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    48 225F				SLEEP 175
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 225F A5 14			lda RTCLOCK_0
     2 2261 18 69 AF			add #175
     3 2264			SLEEP_LOOP:
     4 2264 C5 14			cmp RTCLOCK_0
     5 2266 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    49 2268				DLI_DISABLE
Macro: DLI_DISABLE [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 2268 A9 40			lda #$40
     2 226A 8D 0E D4			sta NMIEN
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_load.asm
    50 					
    51 					
    52 					
    53 					
    16 					
    17 226D 60				rts
    18 				;	jmp zx_loop
    19 					
    20 				;	PM_SHOW
    21
    22 					
    20 226E				ICL 'zx_func.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_func.asm
     1 226E 00 00		zx_print_x: dta 0,0
     2 2270 00 00		zx_print_y: dta 0,0
     3 2272 00 00		zx_print_a: dta 0,0
     4
     5 2274			zx_print_func:
     6 2274 8E 6E 22			stx zx_print_x 
     7 2277 8C 70 22			sty zx_print_y 
     8 227A 8D 72 22			sta zx_print_a 
     9
    10 227D A9 00 85 F3 A9 89 + 	mwa #image_data_zx_font src
    11 2285 AD 00 8C 85 F5 AD + 	mwa screen_adr dst
    12 					
    13 228F 18 A5 F3 6D 72 22 + 	ADW src zx_print_a
    14 229E 18 A5 F3 6D 72 22 + 	ADW src zx_print_a
    15 22AD 18 A5 F3 6D 72 22 + 	ADW src zx_print_a
    16 22BC 18 A5 F3 6D 72 22 + 	ADW src zx_print_a
    17 22CB 18 A5 F3 6D 72 22 + 	ADW src zx_print_a
    18 22DA 18 A5 F3 6D 72 22 + 	ADW src zx_print_a
    19 22E9 18 A5 F3 6D 72 22 + 	ADW src zx_print_a
    20 22F8 18 A5 F3 6D 72 22 + 	ADW src zx_print_a
    21 					
    22 2307 A5 F6			lda dst+1
    23 2309 6D 70 22			adc zx_print_y
    24 230C 85 F6			sta dst+1
    25
    26 230E 18 A5 F5 6D 6E 22 + 	ADW dst zx_print_x
    27 					
    28 231D A2 08			ldx #8
    29 231F A0 00			ldy #0
    30 2321			zx_print_func_loop:
    31 2321 B1 F3			lda (src),y
    32 2323 91 F5			sta (dst),y
    33 2325 E6 F3 D0 02 E6 F4		INW src
    34 232B 18 A5 F5 69 20 85 + 	ADW dst #32
    35 2336 CA				dex
    36 2337 D0 E8			bne zx_print_func_loop
    37
    38 2339 60				rts
    39
    40 				.MACRO ZX_PRINT letter position_x position_y
    41 					lda #:letter
    42 					ldx #:position_x
    43 					ldy #:position_y
    44 					jsr zx_print_func
    45 				.ENDM
    46
    47 233A			zx_print_inv_func:
    48 233A 8D 72 22			sta zx_print_a 
    49 233D 8E 6E 22			stx zx_print_x 
    50 2340 8C 70 22			sty zx_print_y 
    51
    52 2343 A9 00 85 F3 A9 89 + 	mwa #image_data_zx_font src
    53 234B AD 00 8C 85 F5 AD + 	mwa screen_adr dst
    54 					
    55 2355 18 A5 F3 6D 72 22 + 	ADW src zx_print_a
    56 2364 18 A5 F3 6D 72 22 + 	ADW src zx_print_a
    57 2373 18 A5 F3 6D 72 22 + 	ADW src zx_print_a
    58 2382 18 A5 F3 6D 72 22 + 	ADW src zx_print_a
    59 2391 18 A5 F3 6D 72 22 + 	ADW src zx_print_a
    60 23A0 18 A5 F3 6D 72 22 + 	ADW src zx_print_a
    61 23AF 18 A5 F3 6D 72 22 + 	ADW src zx_print_a
    62 23BE 18 A5 F3 6D 72 22 + 	ADW src zx_print_a
    63 					
    64 23CD A5 F6			lda dst+1
    65 23CF 6D 70 22			adc zx_print_y
    66 23D2 85 F6			sta dst+1 
    67
    68 23D4 18 A5 F5 6D 6E 22 + 	ADW dst zx_print_x
    69 					
    70 23E3 A2 08			ldx #8
    71 23E5 A0 00			ldy #0
    72 23E7			zx_print_inv_func_loop:
    73 23E7 B1 F3			lda (src),y
    74 23E9 49 FF			eor #$ff
    75 23EB 91 F5			sta (dst),y
    76 23ED E6 F3 D0 02 E6 F4		INW src
    77 23F3 18 A5 F5 69 20 85 + 	ADW dst #32
    78 23FE CA				dex
    79 23FF D0 E6			bne zx_print_inv_func_loop
    80
    81 2401 60				rts
    82
    83 				.MACRO ZX_PRINT_INV letter position_x position_y
    84 					lda #:letter
    85 					ldx #:position_x
    86 					ldy #:position_y
    87 					jsr zx_print_inv_func
    88 				.ENDM
    89
    90 						
    21 2402				ICL 'func.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\func.asm
     1 				; copy 256 byte block from src to dst
     2
     3 2402			memcopy_block_func:
     4 2402				REG_PUSH
Macro: REG_PUSH [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 2402 48				pha
     2 2403 8A				txa
     3 2404 48				pha
     4 2405 98				tya
     5 2406 48				pha
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\func.asm
     5
     6 2407 A0 00			ldy #0
     7 2409			memcopy_block_loop:	
     8 2409 B1 EF		 	lda (memcopy_block_src),y
     9 240B 91 F1		 	sta (memcopy_block_dst),y
    10 240D C8			 	iny
    11 240E D0 F9		 	bne memcopy_block_loop
    12
    13 2410			 	REG_PULL
Macro: REG_PULL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 2410 68				pla
     2 2411 A8				tay
     3 2412 68				pla
     4 2413 AA				tax
     5 2414 68				pla
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\func.asm
    14 2415 60			 	rts
    15
    16 				.MACRO MEMCOPY_BLOCK src dst
    17 					mwa #:src memcopy_block_src
    18 					mwa #:dst memcopy_block_dst
    19 					
    20 					jsr memcopy_block_func
    21 				.ENDM
    22 2416				ICL 'screen_mem.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\screen_mem.asm
     1 2416				org $4000
     2
     3 4000				.local graphics
     4 4000-8C7F> 00 00 00 00 + 	ins "..\pic\unicorn2inv.gr8"
     5 					.endl
     6
     7 = 4000			screen_mem_1 = $4000
     8 = 4800			screen_mem_1_1 = $4800
     9 = 5000			screen_mem_1_2 = $5000
    10
    11 5800 00 00 00 00 00 00 + 	:6144 dta 0
    12 					
    13 				;	org $5800
    14 7000			screen_mem_2
    15 7000 00 00 00 00 00 00 + 	:2048 dta $0
    16 7800			screen_mem_2_1
    17 7800 00 00 00 00 00 00 + 	:2048 dta $0
    18 8000			screen_mem_2_2
    19 8000 00 00 00 00 00 00 + 	:1792 dta $0
    20 8700			screen_mem_zx:
    21 8700 00 00 00 00 00 00 + 	:256 dta $0
    22
    23 8800			image_data_sinclair_research
    24 8800				.local graphics
    25 8800 3C 00 00 00 00 00 + 	ins "..\pic\gomiboy_research.gr8"
    26 					.endl
    27 8900			image_data_zx_font
    28 8900				.local graphics
    29 8900 00 00 00 00 00 00 + 	ins "..\pic\zx_font.fnt"
    30 					.endl
    31
    32
    33 8C00			screen_adr
    34 8C00 00 00			dta 0,0
    35
    36 8C02			screen_clear:
    37 8C02				REG_PUSH
Macro: REG_PUSH [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 8C02 48				pha
     2 8C03 8A				txa
     3 8C04 48				pha
     4 8C05 98				tya
     5 8C06 48				pha
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\screen_mem.asm
    38 8C07 AD 00 8C 8D 1A 8C + 	mwa screen_adr screen_clear_loop_2+1
    39 8C13 A9 00			lda #0
    40 8C15 A2 18			ldx #24
    41 8C17			screen_clear_loop_1
    42 8C17 A0 00			ldy #0	
    43 8C19			screen_clear_loop_2	
    44 8C19 99 00 00			sta $0000,y
    45 8C1C C8				iny
    46 8C1D D0 FA			bne screen_clear_loop_2
    47 8C1F EE 1B 8C			inc screen_clear_loop_2+2
    48 8C22 CA				dex
    49 8C23 D0 F4			bne screen_clear_loop_2
    50 8C25				REG_PULL
Macro: REG_PULL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 8C25 68				pla
     2 8C26 A8				tay
     3 8C27 68				pla
     4 8C28 AA				tax
     5 8C29 68				pla
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\screen_mem.asm
    51 8C2A 60				rts	
    52
    53 8C2B			screen_fill:
    54 8C2B				REG_PUSH
Macro: REG_PUSH [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 8C2B 48				pha
     2 8C2C 8A				txa
     3 8C2D 48				pha
     4 8C2E 98				tya
     5 8C2F 48				pha
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\screen_mem.asm
    55 8C30 AD 00 8C 8D 43 8C + 	mwa screen_adr screen_fill_loop_2+1
    56 8C3C A9 FF			lda #255
    57 8C3E A2 18			ldx #24
    58 8C40			screen_fill_loop_1
    59 8C40 A0 00			ldy #0	
    60 8C42			screen_fill_loop_2	
    61 8C42 99 00 00			sta $0000,y
    62 8C45 C8				iny
    63 8C46 D0 FA			bne screen_fill_loop_2
    64 8C48 EE 44 8C			inc screen_fill_loop_2+2
    65 8C4B CA				dex
    66 8C4C D0 F4			bne screen_fill_loop_2
    67 8C4E				REG_PULL
Macro: REG_PULL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 8C4E 68				pla
     2 8C4F A8				tay
     3 8C50 68				pla
     4 8C51 AA				tax
     5 8C52 68				pla
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\screen_mem.asm
    68 8C53 60				rts	
    69
    70 					
    71 8C54			screen_set_read_1:
    72 					; load display list address to register
    73 8C54 A9 00 8D 30 02 A9 + 	mwa #dl_antic_1 DLIST
    74 8C5E 60				rts
    75 8C5F			screen_set_write_1:
    76 					; switch working buffer pointer
    77 8C5F A9 00 8D 00 8C A9 + 	mwa #screen_mem_1 screen_adr
    78 8C69 60				rts
    79
    80 8C6A			screen_set_read_2:
    81 					; load display list address to register
    82 8C6A A9 CC 8D 30 02 A9 + 	mwa #dl_antic_2 DLIST
    83 8C74 60				rts
    84 8C75			screen_set_write_2:	
    85 					; switch working buffer pointer
    86 8C75 A9 00 8D 00 8C A9 + 	mwa #screen_mem_2 screen_adr
    87 8C7F 60				rts
    88 					
    23 8C80				ICL 'display_list.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\display_list.asm
     1 8C80				ICL 'display_list_const.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\display_list_const.asm
     1 = 0012			RTCLOCK_2 = $12
     2 = 0013			RTCLOCK_1 = $13
     3 = 0014			RTCLOCK_0 = $14
     4
     5 = 0230			DLIST   = $230
     6 = 0230			DLISTL  = $230 ; display list pointer low byte
     7 = 0231			DLISTH  = $231 ;                      high byte
     8 = 02C8			COLRBK  = $2C8
     9
    10 = D016			COLPF0	= $D016  
    11 = D017			COLPF1	= $D017  
    12 = D018			COLPF2	= $D018  
    13 = D019			COLPF3	= $D019
    14 = D01A			COLBG	= $D01A 
    15
    16 = 02C4			COLOR0	= $02C4
    17 = 02C5			COLOR1	= $02C5
    18 = 02C6			COLOR2	= $02C6
    19 = 02C7			COLOR3	= $02C7
    20 = 02C8			COLOR4 	= $02C8
    21
    22 = 022F			SDMCTL  = $022F
    23 = 022F			DMACTLS = $022F
    24 = D400			DMACTL  = $D400
    25 = 0200			VDSLST  = $0200 ; display list interrupt vector
    26 = D40E			NMEN	= $D40E
    27 = D40E			NMIEN	= $D40E ; bit 7
    28 = D40A			WSYNC   = $D40A
    29 = D40B			VCOUNT  = $D40B
    30
    31 = 02C5			GR8_PEN   = COLOR1
    32 = 02C6			GR8_PAPER = COLOR2
    33 = 02C8			GR8_FRAME = COLOR4 
    34
    35 = D017			DLI_PEN   = COLPF1
    36 = D018			DLI_PAPER = COLPF2
    37 = D01A			DLI_FRAME = COLBG 
    38
    39 = 0000			COLOR_BLACK = $00
    40 = 000E			COLOR_WHITE = $0E
    41 = 00AC			COLOR_CYAN  = $ac
    42 = 0043			COLOR_RED   = $43
    43
    44 = D012			COLPM0	= $D012
    45 = D013			COLPM1	= $D013
    46 = D014			COLPM2	= $D014
    47 = D015			COLPM3	= $D015
    48
    49 = 02C0			COLPM0S	= $02C0
    50 = 02C1			COLPM1S	= $02C1
    51 = 02C2			COLPM2S	= $02C2
    52 = 02C3			COLPM3S	= $02C3
    53
    54
    55 = D008			SIZEP0	= $D008
    56 = D009			SIZEP1	= $D009
    57 = D00A			SIZEP2	= $D00A
    58 = D00B			SIZEP3	= $D00B
    59
    60 = D00C			SIZEM	= $D00C
    61
    62 = D000			HPOSP0	= $D000
    63 = D001			HPOSP1	= $D001
    64 = D002			HPOSP2	= $D002
    65 = D003			HPOSP3	= $D003
    66
    67 = D004			HPOSM0	= $D004
    68 = D005			HPOSM1	= $D005
    69 = D006			HPOSM2	= $D006
    70 = D007			HPOSM3	= $D007
    71
    72 = D01C			VDELAY	= $D01C
    73
    74 = D01B			GTIACTL	= $D01B
    75 = 026F			GTIACTLS = $026F
    76
    77 = D01D			PMCTL	= $D01D
    78
    79 = D407			PMBASE = $D407
    80
    81 				;     SAVMSC $0058,2       (88): pointer to current screen for CIO commands
    82 				;     RAMTOP $006A        (106): start-of-ROM pointer (MSB only)
    83 				;     VDSLST $0200,2      (512): DLI vector
    84 				;     RAMSIZ $02E4        (740): permanent start-of-ROM pointer (MSB only)
    85 				;     DLISTL $D402      (54274): display list pointer low byte
    86 				;     DLISTH $D403      (54275):     "    high byte
    87 				;     HSCROL $D404      (54276): horizontal scroll register
    88 				;     VSCROL $D405      (54277): vertical scroll register
    89 				;     NMIEN  $D40E      (54286): NMI enable (DLIs)
    90 				;     
    91 				;     
    92 				;                               Shadow registers
    93 				;     
    94 				;     
    95 				;     SDLSTL $0230        (560): DLISTL
    96 				;     SDLSTH $0231        (561): DLISTH
     2
     3 8C80				org $3800
     4
     5 = 0080			DL_DLI = $80
     6
     7 				; DL for first buffer	
     8 3800-39C8> F0 70 70	dl_antic_1	dta $F0,$70,$70              ; 3x8 empty scanlines
     9 3803 4F 00 40				dta b($4f),a(screen_mem_1)   ; $0f - mode, $40 - addr of 1/3 screen bitmap 
    10 3806 0F 0F 0F 0F 0F 0F + 		:62 dta b($0f)               ; 63 lines of $0f 
    11 3844 0F					dta b($0f)                   ; 1 line of $0f + DLI 
    12 3845 4F 00 48				dta b($4f),a(screen_mem_1_1) ; $0f - mode, $40 - addr of 2/3 screen bitmap
    13 3848 0F 0F 0F 0F 0F 0F + 		:63 dta b($0f)	             ; 63 lines of $0f 
    14 3887 4F 00 50				dta b($4f),a(screen_mem_1_2) ; $0f - mode, $40 - addr of 3/3 screen bitmap
    15 388A 0F 0F 0F 0F 0F 0F + 		:63 dta b($0f)               ; 63 lines of $0f
    16 						;dta b($c1),a(dl_antic_1)     ; jump to DL start and trigger interrupt
    17 38C9 41 00 38				dta b($41),a(dl_antic_1)     ; jump to DL start
    18 38CC 70 70 70		dl_antic_2	dta $70,$70,$70              ; 3x8 empty scanlines 
    19 38CF CF 00 70				dta b($cf),a(screen_mem_2)   ; $0f - mode, $40 - addr of 1/3 screen bitmap
    20 38D2 0F 0F 0F 0F 0F 0F + 		:63 dta b($0f)               ; 63 lines of $0f 
    21 3911 4F 00 78				dta b($4f),a(screen_mem_2_1) ; $0f - mode, $40 - addr of 2/3 screen bitmap
    22 3914 0F 0F 0F 0F 0F 0F + 		:63 dta b($0f)	             ; 63 lines of $0f 
    23 3953 4F 00 80				dta b($4f),a(screen_mem_2_2) ; $0f - mode, $40 - addr of 3/3 screen bitmap
    24 3956 0F 0F 0F 0F 0F 0F + 		:63 dta b($0f)               ; 63 lines of $0f 
    25 						;dta b($c1),a(dl_antic_2)     ; jump to DL start and trigger interrupt
    26 3995 41 CC 38				dta b($41),a(dl_antic_2)     ; jump to DL start 
    27
    28 3998			dl_set_mode
    29 					; set screen width to 32 byte
    30 				;	lda #%11111100
    31 				;	and DMACTLS
    32 				;	ora #%00000001
    33 3998 A9 39			lda #57
    34 399A 8D 2F 02			sta DMACTLS
    35
    36 399D A9 00			lda #COLOR_BLACK     
    37 399F 8D C5 02			sta GR8_PEN
    38 39A2 A9 00			lda #COLOR_BLACK     
    39 39A4 8D C6 02			sta GR8_PAPER
    40 39A7 A9 00			lda #COLOR_BLACK     
    41 39A9 8D C8 02			sta GR8_FRAME
    42 					
    43 39AC A9 0E			lda #COLOR_WHITE
    44 39AE 8D C5 02			sta COLOR1
    45 39B1 A9 00			lda #COLOR_BLACK
    46 39B3 8D C6 02			sta COLOR2
    47 					
    48
    49 39B6 60				rts
    50
    51 						
    24 39B7				ICL 'wait_vsync.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\wait_vsync.asm
     1
     2
     3 39B7			wait_hsync:
     4
     5 39B7 48				pha
     6
     7 39B8 A9 52			lda #$52
     8 39BA 8D 0A D4			sta WSYNC	;WAIT
     9 39BD 68				pla
    10
    11 39BE 60				rts
    12
    13
    14 39BF			wait_vsync:
    15 39BF 48				pha
    16 39C0			wait_vsync_loop:
    17 39C0 AD 0B D4			lda VCOUNT
    18 39C3 C9 64			cmp #100
    19 39C5 D0 F9			bne wait_vsync_loop 
    20 					
    21 39C7 68				pla
    22 39C8 60				rts
    23 					
    25 39C9				ICL 'math.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\math.asm
     1 39C9				org $1D00
     2 					
     3 				;MATH_SIN_LEN = 16
     4 				;MATH_SIN_MASK = %00001111	
     5 				; math_sin dta 127,176,218,245,255,245,218,176,127,78,36,9,0,9,36,78
     6 				; math_sin dta 128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79
     7 				        
     8 				;MATH_SIN_LEN = 64
     9 				;MATH_SIN_MASK = %00111111	
    10 				;math_sin dta 128,140,152,165,176,188,198,208,218,226,234,240,245,250,253,254,255,254,253,250,245,240,234,226,218,208,198,188,176,165,152,140,128,115,103,90,79,67,57,47,37,29,21,15,10,5,2,1,0,1,2,5,10,15,21,29,37,47,57,67,79,90,103,115
    11
    12 = 0100			MATH_SIN_LEN = 256
    13 = 00FF			MATH_SIN_MASK = %11111111	
    14 1D00-1F0F> 80 83 86 89 + math_sin dta 128,131,134,137,140,143,146,149,152,155,158,162,165,167,170,173,176,179,182,185,188,190,193,196,198,201,203,206,208,211,213,215,218,220,222,224,226,228,230,232,234,235,237,238,240,241,243,244,245,246,248,249,250,250,251,252,253,253,254,254,254,255,0,0,0,0,0,255,254,254,254,253,253,252,251,250,250,249,248,246,245,244,243,241,240,238,237,235,234,232,230,228,226,224,222,220,218,215,213,211,208,206,203,201,198,196,193,190,188,185,182,179,176,173,170,167,165,162,158,155,152,149,146,143,140,137,134,131,128,124,121,118,115,112,109,106,103,100,97,93,90,88,85,82,79,76,73,70,67,65,62,59,57,54,52,49,47,44,42,40,37,35,33,31,29,27,25,23,21,20,18,17,15,14,12,11,10,9,7,6,5,5,4,3,2,2,1,1,1,0,0,0,0,0,0,0,1,1,1,2,2,3,4,5,5,6,7,9,10,11,12,14,15,17,18,20,21,23,25,27,29,31,33,35,37,40,42,44,47,49,52,54,57,59,62,65,67,70,73,76,79,82,85,88,90,93,97,100,103,106,109,112,115,118,121,124
    15
    16 = 0010			MATH_SIN_LEN_16 = 16
    17 = 000F			MATH_SIN_MASK_16 = %00001111	
    18 1E00 80 B0 DA F5 FF F5 + math_sin_16 dta 128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79
    19
    20 1F00 C0 C0 60 40 30 27 + math_192_div dta 192,192,96,64,48,39,32,28,24,22,20,18,16,15,14,13
    26 1F10				ICL 'zero.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zero.asm
     1 1F10				org $e0
     2
     3 00E0-00F8> 00		zero_a	dta 0
     4 00E1 00			zero_x	dta 0
     5 00E2 00			zero_y	dta 0
     6 00E3 00			zero_1	dta 0
     7 00E4 00			zero_2	dta 0
     8 00E5 00			zero_3	dta 0
     9 00E6 00			bar_size dta 0
    10 00E7 00			bar_color1 dta 0
    11 00E8 00			bar_color2 dta 0
    12 00E9 00			bar_color10 dta 0
    13 00EA 00			bar_color20 dta 0
    14 00EB			part1_image_data_address: 
    15 00EB 00 00			dta 0,0
    16 00ED			part1_screen_data_address: 
    17 00ED 00 00			dta 0,0
    18 00EF			memcopy_block_src:
    19 00EF 00 00			dta 0,0
    20 00F1			memcopy_block_dst:
    21 00F1 00 00			dta 0,0
    22 00F3			src:
    23 00F3 00 00			dta 0,0
    24 00F5			dst:
    25 00F5 00 00			dta 0,0
    26 00F7			tmp_word:
    27 00F7 00 00			dta 0,0
    28 					
    27 00F9				ICL 'ghosts.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\ghosts.asm
     1 00F9				org $6000
     2
     3 6000			pm_base:
     4 6000-6AA0> FF FF FF FF + 	:768 dta $FF
     5 6300			pm_missle:
     6 6300 FF FF FF FF FF FF + 	:256 dta $FF
     7 6400			pm_player0:
     8 6400 FF FF FF FF FF FF + 	:256 dta $FF
     9 6500			pm_player1:
    10 6500 FF FF FF FF FF FF + 	:256 dta $FF
    11 6600			pm_player2:
    12 6600 FF FF FF FF FF FF + 	:256 dta $FF
    13 6700			pm_player3:
    14 6700 FF FF FF FF FF FF + 	:256 dta $FF
    15 					
    16 				.MACRO PM_SHOW
    17 				
    18 					lda #$60
    19 					sta PMBASE	; PMBASE
    20 				
    21 					lda #1
    22 					sta GTIACTLS		; GTIACTLS
    23 				
    24 					; szerokoœæ
    25 					lda #0
    26 					sta SIZEP0	; SIZEP0
    27 					lda #1
    28 					sta SIZEP1	; SIZEP0
    29 					lda #1
    30 					sta SIZEP2	; SIZEP0
    31 					lda #0
    32 					sta SIZEP3	; SIZEP0
    33 				
    34 					lda #2
    35 					sta PMCTL	; PMCTL
    36 				
    37 					lda #57
    38 					sta DMACTLS		; DMACTLS
    39 				
    40 					; 64 - begin
    41 					; 4,8,12,16
    42 					lda #68
    43 					sta HPOSP0 
    44 				
    45 					lda #88
    46 					sta HPOSP1 
    47 				
    48 					lda #150
    49 					sta HPOSP2 
    50 				
    51 					lda #180
    52 					sta HPOSP3 
    53 				
    54 					lda #14
    55 					sta COLPM0
    56 					sta COLPM1
    57 					sta COLPM2
    58 					sta COLPM3
    59 				
    60 				.ENDM
    61
    62 				.MACRO PM_HIDE
    63 					lda #0
    64 					sta HPOSP0 
    65 					sta HPOSP1 
    66 					sta HPOSP2 
    67 					sta HPOSP3 
    68 				.ENDM
    69
    70
    71 				.MACRO PM_MOVE
    72 					lda RTCLOCK_0
    73 					sta 53248
    74 				.ENDM
    75
    28 6800				ICL 'part1.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     1 6800 00			part1_x dta 0
     2 6801 00			part1_y dta 0
     3 6802 00			part1_d dta 0
     4 6803 00			TMPCLR dta 0
     5
     6 6804 00			part1_tmpx dta 0
     7 6805 00			part1_tmpy dta 0
     8 6806 00			part1_sync: dta 0
     9
    10
    11 6807			part1:
    12 					; set handler for display list interrupt 
    13 				;	mwa #part1_dli_handler VDSLST
    14
    15 					; enable DL interrupt
    16 				;	lda #$c0
    17 				;	sta NMIEN
    18 					
    19 6807				DLI_ENABLE part1_dli_handler
Macro: DLI_ENABLE [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 6807 A9 A5 8D 00 02 A9 + 	mwa #PART1_DLI_HANDLER VDSLST
     2 6811 A9 C0			lda #$c0
     3 6813 8D 0E D4			sta NMIEN
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
    20
    21 6816 A9 00			lda #COLOR_BLACK     
    22 6818 8D C5 02			sta GR8_PEN
    23 681B A9 00			lda #COLOR_BLACK     
    24 681D 8D C6 02			sta GR8_PAPER
    25 6820 A9 00			lda #COLOR_BLACK     
    26 6822 8D C8 02			sta GR8_FRAME
    27 					
    28 6825 A9 0E			lda #COLOR_WHITE
    29 6827 8D C5 02			sta COLOR1
    30 682A A9 00			lda #COLOR_BLACK
    31 682C 8D C6 02			sta COLOR2
    32
    33 682F 20 5F 8C			jsr screen_set_write_1
    34 6832 20 54 8C			jsr screen_set_read_1
    35 					
    36 6835				PM_SHOW
Macro: PM_SHOW [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\ghosts.asm]
     2 6835 A9 60			lda #$60
     3 6837 8D 07 D4			sta PMBASE	; PMBASE
     5 683A A9 01			lda #1
     6 683C 8D 6F 02			sta GTIACTLS		; GTIACTLS
     9 683F A9 00			lda #0
    10 6841 8D 08 D0			sta SIZEP0	; SIZEP0
    11 6844 A9 01			lda #1
    12 6846 8D 09 D0			sta SIZEP1	; SIZEP0
    13 6849 A9 01			lda #1
    14 684B 8D 0A D0			sta SIZEP2	; SIZEP0
    15 684E A9 00			lda #0
    16 6850 8D 0B D0			sta SIZEP3	; SIZEP0
    18 6853 A9 02			lda #2
    19 6855 8D 1D D0			sta PMCTL	; PMCTL
    21 6858 A9 39			lda #57
    22 685A 8D 2F 02			sta DMACTLS		; DMACTLS
    26 685D A9 44			lda #68
    27 685F 8D 00 D0			sta HPOSP0 
    29 6862 A9 58			lda #88
    30 6864 8D 01 D0			sta HPOSP1 
    32 6867 A9 96			lda #150
    33 6869 8D 02 D0			sta HPOSP2 
    35 686C A9 B4			lda #180
    36 686E 8D 03 D0			sta HPOSP3 
    38 6871 A9 0E			lda #14
    39 6873 8D 12 D0			sta COLPM0
    40 6876 8D 13 D0			sta COLPM1
    41 6879 8D 14 D0			sta COLPM2
    42 687C 8D 15 D0			sta COLPM3
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
    37
    38
    39 687F			part1_0:
    40
    41 					
    42 687F			part1_0_idle:
    43 					
    44 					;PM_MOVE
    45 					
    46 				;	jmp part1_0_idle
    47
    48 687F				SLEEP 250
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 687F A5 14			lda RTCLOCK_0
     2 6881 18 69 FA			add #250
     3 6884			SLEEP_LOOP:
     4 6884 C5 14			cmp RTCLOCK_0
     5 6886 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
    49 6888				SLEEP 250
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 6888 A5 14			lda RTCLOCK_0
     2 688A 18 69 FA			add #250
     3 688D			SLEEP_LOOP:
     4 688D C5 14			cmp RTCLOCK_0
     5 688F D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
    50 					
    51 6891				DLI_DISABLE
Macro: DLI_DISABLE [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 6891 A9 40			lda #$40
     2 6893 8D 0E D4			sta NMIEN
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
    52 6896				PM_HIDE
Macro: PM_HIDE [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\ghosts.asm]
     1 6896 A9 00			lda #0
     2 6898 8D 00 D0			sta HPOSP0 
     3 689B 8D 01 D0			sta HPOSP1 
     4 689E 8D 02 D0			sta HPOSP2 
     5 68A1 8D 03 D0			sta HPOSP3 
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
    53
    54 68A4 60				rts
    55
    56 68A5			part1_dli_handler:
    57
    58 				; line:
    59 				; 32 cycles - frame (2+26+4)
    60 				; 28 cycles - screen
    61
    62 68A5				REG_PUSH
Macro: REG_PUSH [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 68A5 48				pha
     2 68A6 8A				txa
     3 68A7 48				pha
     4 68A8 98				tya
     5 68A9 48				pha
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
    63 68AA A9 00			lda #COLOR_BLACK
    64 68AC 8D 18 D0			sta DLI_PAPER ; black
    65
    66
    67 					; bar size
    68 68AF A9 02			lda #2
    69 68B1 85 E6			sta bar_size
    70
    71 68B3 8D 0A D4			:1 sta WSYNC	;WAIT
    72 					
    73 68B6 A9 01			lda #1
    74 68B8 8D 12 D0			sta COLPM0
    75 68BB 8D 13 D0			sta COLPM1
    76 68BE 8D 14 D0			sta COLPM2
    77 68C1 8D 15 D0			sta COLPM3
    78
    79 					; cycle begin
    80 68C4 A2 01			ldx #1
    81 68C6 8D 0A D4			:1 sta WSYNC	;WAIT
    82
    83 				;	lda math_sin_16,x
    84 				;	:4 lsr
    85 				;	adc #1
    86 				;	tax
    87
    88 68C9 8D 0A D4			:1 sta WSYNC
    89 					
    90 68CC A5 13			lda RTCLOCK_1
    91 68CE 8D C0 02			sta 704		; KOLOR
    92
    93 68D1 8D 0A D4 8D 0A D4 + 	:18 sta WSYNC	;WAIT
    94
    95 					; init color value
    96 6907 A4 14			ldy RTCLOCK_0
    97 6909 B9 00 1D			lda math_sin,y
    98 690C 85 E7			sta bar_color1
    99 690E 98				tya
   100 690F 49 FF			eor #$ff
   101 6911 A8				tay
   102 6912 B9 00 1D			lda math_sin,y
   103 6915 85 E8			sta bar_color2
   104
   105 6917 8D 0A D4			:1 sta WSYNC	;WAIT
   106
   107 					; 192 screen lines
   108
   109
   110 691A A6 E7			ldx bar_color1
   111 691C A4 E8			ldy bar_color2
   112
   113 691E				LINE_NOP_NORMAL
Macro: LINE_NOP_NORMAL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 691E 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     1 6921 CA				dex
     2 6922 88				dey
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     3 6923 8C 12 D0			sty COLPM0
     4 6926 8C 13 D0			sty COLPM1
     5 6929 8E 14 D0			stx COLPM2
     6 692C 8E 15 D0			stx COLPM3
     7 692F 8E 18 D0			stx DLI_PAPER	; 4 cycles
     1 6932 EA				nop
     2 6933 EA				nop
     3 6934 EA				nop
     4 6935 EA				nop
     5 6936 EA				nop
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     9 6937 EA				nop
    10 6938 8C 18 D0			sty DLI_PAPER	; 4 cycles
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
   114 693B				LINE_NOP_NORMAL
Macro: LINE_NOP_NORMAL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 693B 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     1 693E CA				dex
     2 693F 88				dey
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     3 6940 8C 12 D0			sty COLPM0
     4 6943 8C 13 D0			sty COLPM1
     5 6946 8E 14 D0			stx COLPM2
     6 6949 8E 15 D0			stx COLPM3
     7 694C 8E 18 D0			stx DLI_PAPER	; 4 cycles
     1 694F EA				nop
     2 6950 EA				nop
     3 6951 EA				nop
     4 6952 EA				nop
     5 6953 EA				nop
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     9 6954 EA				nop
    10 6955 8C 18 D0			sty DLI_PAPER	; 4 cycles
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
   115
   116 6958 A9 39			lda #57
   117 695A			dli_handler_loop_0:
   118 695A				LINE_NOP_NORMAL
Macro: LINE_NOP_NORMAL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 695A 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     1 695D CA				dex
     2 695E 88				dey
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     3 695F 8C 12 D0			sty COLPM0
     4 6962 8C 13 D0			sty COLPM1
     5 6965 8E 14 D0			stx COLPM2
     6 6968 8E 15 D0			stx COLPM3
     7 696B 8E 18 D0			stx DLI_PAPER	; 4 cycles
     1 696E EA				nop
     2 696F EA				nop
     3 6970 EA				nop
     4 6971 EA				nop
     5 6972 EA				nop
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     9 6973 EA				nop
    10 6974 8C 18 D0			sty DLI_PAPER	; 4 cycles
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
   119 6977 E9 01			sbc #1
   120 6979 D0 DF			bne dli_handler_loop_0
   121
   122 697B				LINE_NOP_SHORT
Macro: LINE_NOP_SHORT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 697B 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     1 697E CA				dex
     2 697F 88				dey
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     3 6980 8C 12 D0			sty COLPM0
     4 6983 8C 13 D0			sty COLPM1
     5 6986 8E 14 D0			stx COLPM2
     6 6989 8E 15 D0			stx COLPM3
     7 698C 8E 18 D0			stx DLI_PAPER	; 4 cycles
     1 698F EA				nop
     2 6990 EA				nop
     3 6991 EA				nop
     4 6992 EA				nop
     5 6993 EA				nop
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     9 6994 8C 18 D0			sty DLI_PAPER	; 4 cycles
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
   123
   124 6997 A9 3F			lda #63
   125 6999			dli_handler_loop_1:
   126 6999				LINE_NOP_NORMAL
Macro: LINE_NOP_NORMAL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 6999 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     1 699C CA				dex
     2 699D 88				dey
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     3 699E 8C 12 D0			sty COLPM0
     4 69A1 8C 13 D0			sty COLPM1
     5 69A4 8E 14 D0			stx COLPM2
     6 69A7 8E 15 D0			stx COLPM3
     7 69AA 8E 18 D0			stx DLI_PAPER	; 4 cycles
     1 69AD EA				nop
     2 69AE EA				nop
     3 69AF EA				nop
     4 69B0 EA				nop
     5 69B1 EA				nop
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     9 69B2 EA				nop
    10 69B3 8C 18 D0			sty DLI_PAPER	; 4 cycles
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
   127 69B6 E9 01			sbc #1
   128 69B8 D0 DF			bne dli_handler_loop_1
   129 69BA				LINE_NOP_SHORT
Macro: LINE_NOP_SHORT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 69BA 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     1 69BD CA				dex
     2 69BE 88				dey
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     3 69BF 8C 12 D0			sty COLPM0
     4 69C2 8C 13 D0			sty COLPM1
     5 69C5 8E 14 D0			stx COLPM2
     6 69C8 8E 15 D0			stx COLPM3
     7 69CB 8E 18 D0			stx DLI_PAPER	; 4 cycles
     1 69CE EA				nop
     2 69CF EA				nop
     3 69D0 EA				nop
     4 69D1 EA				nop
     5 69D2 EA				nop
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     9 69D3 8C 18 D0			sty DLI_PAPER	; 4 cycles
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
   130
   131 69D6 A9 3E			lda #62
   132 69D8			dli_handler_loop_2:
   133 69D8				LINE_NOP_NORMAL
Macro: LINE_NOP_NORMAL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 69D8 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     1 69DB CA				dex
     2 69DC 88				dey
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     3 69DD 8C 12 D0			sty COLPM0
     4 69E0 8C 13 D0			sty COLPM1
     5 69E3 8E 14 D0			stx COLPM2
     6 69E6 8E 15 D0			stx COLPM3
     7 69E9 8E 18 D0			stx DLI_PAPER	; 4 cycles
     1 69EC EA				nop
     2 69ED EA				nop
     3 69EE EA				nop
     4 69EF EA				nop
     5 69F0 EA				nop
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     9 69F1 EA				nop
    10 69F2 8C 18 D0			sty DLI_PAPER	; 4 cycles
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
   134 69F5 E9 01			sbc #1
   135 69F7 D0 DF			bne dli_handler_loop_2
   136
   137 				;	LINE_NOP_SHORT
   138 					
   139 69F9				LINE_NOP_LAST
Macro: LINE_NOP_LAST [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 69F9 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     2 69FC 8E 18 D0			stx DLI_PAPER	; 4 cycles
     3 69FF A9 01			lda #1
     4 6A01 8D 12 D0			sta COLPM0
     5 6A04 8D 13 D0			sta COLPM1
     6 6A07 8D 14 D0			sta COLPM2
     7 6A0A 8D 15 D0			sta COLPM3
     1 6A0D EA				nop
     2 6A0E EA				nop
     3 6A0F EA				nop
     4 6A10 EA				nop
     5 6A11 EA				nop
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
     9 6A12 EA				nop
    10 6A13 8C 18 D0			sty DLI_PAPER	; 4 cycles
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
   140
   141 6A16 A9 01			lda #1
   142 6A18 8D 12 D0			sta COLPM0
   143 6A1B 8D 13 D0			sta COLPM1
   144 6A1E 8D 14 D0			sta COLPM2
   145 6A21 8D 15 D0			sta COLPM3
   146
   147 6A24				LINE_WAIT
Macro: LINE_WAIT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 6A24 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
   148 					
   149
   150 6A27				REG_PULL
Macro: REG_PULL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 6A27 68				pla
     2 6A28 A8				tay
     3 6A29 68				pla
     4 6A2A AA				tax
     5 6A2B 68				pla
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\part1.asm
   151 6A2C 40				rti
   152 					
   153 					
   154 					
    29 6A2D				ICL 'zx_dli.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_dli.asm
     1
     2 6A2D			zx_dli_header_block:
     3
     4 6A2D				REG_PUSH
Macro: REG_PUSH [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 6A2D 48				pha
     2 6A2E 8A				txa
     3 6A2F 48				pha
     4 6A30 98				tya
     5 6A31 48				pha
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_dli.asm
     5
     6 					; 192 screen lines
     7 6A32 A0 F0			ldy #240
     8 6A34			zx_dli_header_block_loop1:	
     9 6A34 B1 14			lda (RTCLOCK_0),y
    10 6A36 69 05			adc #5
    11 6A38 29 0F			and #$0f
    12 6A3A A2 43			ldx #COLOR_RED
    13 6A3C 8E 1A D0			stx DLI_FRAME
    14 6A3F			zx_dli_header_block_loop2:	
    15 6A3F				LINE_WAIT
Macro: LINE_WAIT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 6A3F 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_dli.asm
    16 6A42 88				dey
    17 6A43 F0 1C			beq zx_dli_header_block_end
    18 6A45 E9 01			sbc #1
    19 6A47 D0 F6			bne zx_dli_header_block_loop2
    20
    21 6A49			zx_dli_header_block_loop3:	
    22 6A49 B1 14			lda (RTCLOCK_0),y
    23 6A4B 69 05			adc #5
    24 6A4D 29 0F			and #$0f
    25 6A4F A2 AC			ldx #COLOR_CYAN
    26 6A51 8E 1A D0			stx DLI_FRAME
    27 6A54			zx_dli_header_block_loop4:	
    28 6A54				LINE_WAIT
Macro: LINE_WAIT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 6A54 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_dli.asm
    29 6A57 88				dey
    30 6A58 F0 07			beq zx_dli_header_block_end
    31 6A5A E9 01			sbc #1
    32 6A5C D0 F6			bne zx_dli_header_block_loop4
    33 6A5E 4C 34 6A			jmp zx_dli_header_block_loop1
    34
    35 6A61			zx_dli_header_block_end:
    36 6A61				REG_PULL
Macro: REG_PULL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 6A61 68				pla
     2 6A62 A8				tay
     3 6A63 68				pla
     4 6A64 AA				tax
     5 6A65 68				pla
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_dli.asm
    37 6A66 40				rti
    38 					
    39 				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    40
    41 6A67			zx_dli_data_block:
    42
    43 6A67				REG_PUSH
Macro: REG_PUSH [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 6A67 48				pha
     2 6A68 8A				txa
     3 6A69 48				pha
     4 6A6A 98				tya
     5 6A6B 48				pha
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_dli.asm
    44
    45 					; 192 screen lines
    46 6A6C A0 F0			ldy #240
    47 6A6E			zx_dli_data_block_loop1:	
    48 6A6E B1 13			lda (RTCLOCK_1),y
    49 6A70 69 03			adc #3
    50 6A72 29 07			and #$07
    51 6A74 A2 43			ldx #COLOR_RED
    52 6A76 8E 1A D0			stx DLI_FRAME
    53 6A79			zx_dli_data_block_loop2:	
    54 6A79				LINE_WAIT
Macro: LINE_WAIT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 6A79 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_dli.asm
    55 6A7C 88				dey
    56 6A7D F0 1C			beq zx_dli_data_block_end
    57 6A7F E9 01			sbc #1
    58 6A81 D0 F6			bne zx_dli_data_block_loop2
    59
    60 6A83			zx_dli_data_block_loop3:	
    61 6A83 B1 14			lda (RTCLOCK_0),y
    62 6A85 69 05			adc #5
    63 6A87 29 0F			and #$0f
    64 6A89 A2 AC			ldx #COLOR_CYAN
    65 6A8B 8E 1A D0			stx DLI_FRAME
    66 6A8E			zx_dli_data_block_loop4:	
    67 6A8E				LINE_WAIT
Macro: LINE_WAIT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 6A8E 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_dli.asm
    68 6A91 88				dey
    69 6A92 F0 07			beq zx_dli_data_block_end
    70 6A94 E9 01			sbc #1
    71 6A96 D0 F6			bne zx_dli_data_block_loop4
    72 6A98 4C 6E 6A			jmp zx_dli_data_block_loop1
    73
    74 6A9B			zx_dli_data_block_end:
    75 6A9B				REG_PULL
Macro: REG_PULL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\macro.asm]
     1 6A9B 68				pla
     2 6A9C A8				tay
     3 6A9D 68				pla
     4 6A9E AA				tax
     5 6A9F 68				pla
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx3\zx_dli.asm
    76 6AA0 40				rti
    77 					
    78 					
    79 						
    80 					
    81 					
    82 					
    83 					
    84 					
    85 					
    30
