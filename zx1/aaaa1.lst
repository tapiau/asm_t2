mads 2.0.6 build 58 (28 Jan 17)
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\aaaa1.asm
     1 					ICL 'macro.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm
     1 				.MACRO REG_PUSH 
     2 					pha
     3 					txa
     4 					pha
     5 					tya
     6 					pha
     7 				.ENDM
     8
     9 				.MACRO REG_PULL
    10 					pla
    11 					tay
    12 					pla
    13 					tax
    14 					pla
    15 				.ENDM
    16
    17 				.MACRO SLEEP frames
    18 					lda RTCLOCK_0
    19 					add #:frames
    20 				SLEEP_LOOP:
    21 					cmp RTCLOCK_0
    22 					bne SLEEP_LOOP
    23 				.ENDM
    24
    25 				.MACRO LINE_SPACE_9_CYCLES
    26 					nop
    27 					nop
    28 					nop
    29 					sta bar_color20	; 3 cycles
    30 				.ENDM
    31
    32 				.MACRO LINE_SPACE_10_CYCLES
    33 					nop
    34 					nop
    35 					nop
    36 					nop
    37 					nop
    38 				.ENDM
    39
    40 				.MACRO LINE_SPACE_11_CYCLES
    41 					nop
    42 					nop
    43 					nop
    44 					nop
    45 					sta bar_color20	; 3 cycles
    46 				.ENDM
    47
    48 				.MACRO LINE_WAIT
    49 					sta WSYNC	;WAIT
    50 				.ENDM
    51
    52 				.MACRO LINE_COLOR_CALC
    53 					dex
    54 					dey
    55 				.ENDM
    56
    57 				.MACRO LINE_NOP_HALF
    58 					LINE_WAIT
    59 				
    60 					;; 4 nops
    61 					LINE_COLOR_CALC
    62 					
    63 					LINE_NOP_SPACE_1
    64 					
    65 					sta bar_color20	; 3 cycles
    66 					stx DLI_PAPER	; 4 cycles
    67 				;	stx DLI_PEN	; 4 cycles
    68 					LINE_NOP_SPACE_2
    69 					sty DLI_PAPER	; 4 cycles
    70 				;	sty DLI_PEN	; 4 cycles
    71 				.ENDM
    72
    73 				.MACRO LINE_NOP_NORMAL
    74 					LINE_WAIT
    75 					LINE_COLOR_CALC
    76 					sty COLPM0
    77 					sty COLPM1
    78 					stx COLPM2
    79 					stx COLPM3
    80 					stx DLI_PAPER	; 4 cycles
    81 					LINE_SPACE_10_CYCLES
    82 					nop
    83 					sty DLI_PAPER	; 4 cycles
    84 				.ENDM
    85
    86 				.MACRO LINE_NOP_SHORT
    87 					LINE_WAIT
    88 					LINE_COLOR_CALC
    89 					sty COLPM0
    90 					sty COLPM1
    91 					stx COLPM2
    92 					stx COLPM3
    93 					stx DLI_PAPER	; 4 cycles
    94 					LINE_SPACE_10_CYCLES
    95 					sty DLI_PAPER	; 4 cycles
    96 				.ENDM
    97
    98 				.MACRO LINE_NOP_LAST
    99 					LINE_WAIT
   100 					stx DLI_PAPER	; 4 cycles
   101 					lda #1
   102 					sta COLPM0
   103 					sta COLPM1
   104 					sta COLPM2
   105 					sta COLPM3
   106 					LINE_SPACE_10_CYCLES
   107 					nop
   108 					sty DLI_PAPER	; 4 cycles
   109 				.ENDM
   110
   111 				.MACRO DLI_ENABLE handler
   112 					mwa #:handler VDSLST
   113 					lda #$c0
   114 					sta NMIEN
   115 				.ENDM
   116
   117 				.MACRO DLI_DISABLE
   118 					lda #$40
   119 					sta NMIEN
   120 				.ENDM
     2
     3 					org $2000
     4
     5 					.proc main
     6 					
     7 FFFF> 2000-2417> 4C 03 + 	jmp zx
     8
     9 					.endp
    10 					
    11 2003				ICL 'zx.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx.asm
     1 2003			zx:
     2 					; set handler for display list interrupt 
     3 				;	mwa #part1_dli_handler VDSLST
     4 2003 20 98 39			jsr dl_set_mode
     5
     6 					; enable DL interrupt
     7 				;	lda #$c0
     8 				;	sta NMIEN
     9
    10 2006 A9 00			lda #COLOR_BLACK     
    11 2008 8D C5 02			sta GR8_PEN
    12 200B A9 0E			lda #COLOR_WHITE     
    13 200D 8D C6 02			sta GR8_PAPER
    14 2010 A9 0E			lda #COLOR_WHITE     
    15 2012 8D C8 02			sta GR8_FRAME
    16
    17 2015 20 5F 75			jsr screen_set_write_1
    18 2018 20 54 75			jsr screen_set_read_1
    19 					
    20 201B			zx_loop:
    21
    22 201B				ICL "zx_boot.asm"
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
     1 201B A9 0E			lda #COLOR_WHITE
     2 201D 8D C8 02			sta GR8_FRAME
     3 2020 20 2B 75			jsr screen_fill
     4 2023				SLEEP 50
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2023 A5 14			lda RTCLOCK_0
     2 2025 18 69 32			add #50
     3 2028			SLEEP_LOOP:
     4 2028 C5 14			cmp RTCLOCK_0
     5 202A D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
     5 202C 20 02 75			jsr screen_clear
     6 					
     7 202F				MEMCOPY_BLOCK image_data_sinclair_research screen_mem_zx
Macro: MEMCOPY_BLOCK [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\func.asm]
     1 202F A9 00 85 EF A9 70 + 	mwa #IMAGE_DATA_SINCLAIR_RESEARCH memcopy_block_src
     2 2037 A9 00 85 F1 A9 57 + 	mwa #SCREEN_MEM_ZX memcopy_block_dst
     4 203F 20 04 24			jsr memcopy_block_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
     8 2042				SLEEP 50
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2042 A5 14			lda RTCLOCK_0
     2 2044 18 69 32			add #50
     3 2047			SLEEP_LOOP:
     4 2047 C5 14			cmp RTCLOCK_0
     5 2049 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
     9
    10 204B 20 02 75			jsr screen_clear
    11 				;	MEMCOPY_BLOCK image_data_load_pp_L screen_mem_zx
    12 				;	SLEEP 50
    13 					
    14 204E				ZX_PRINT 'L'-32 0 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 204E A9 2C			lda #'L'-32
     2 2050 A2 00			ldx #0
     3 2052 A0 17			ldy #23
     4 2054 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    15 2057				ZX_PRINT 'O'-32 1 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2057 A9 2F			lda #'O'-32
     2 2059 A2 01			ldx #1
     3 205B A0 17			ldy #23
     4 205D 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    16 2060				ZX_PRINT 'A'-32 2 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2060 A9 21			lda #'A'-32
     2 2062 A2 02			ldx #2
     3 2064 A0 17			ldy #23
     4 2066 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    17 2069				ZX_PRINT 'D'-32 3 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2069 A9 24			lda #'D'-32
     2 206B A2 03			ldx #3
     3 206D A0 17			ldy #23
     4 206F 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    18 2072				ZX_PRINT ' '-32 4 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2072 A9 00			lda #' '-32
     2 2074 A2 04			ldx #4
     3 2076 A0 17			ldy #23
     4 2078 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    19 207B				ZX_PRINT_INV 'L'-32 5 23
Macro: ZX_PRINT_INV [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 207B A9 2C			lda #'L'-32
     2 207D A2 05			ldx #5
     3 207F A0 17			ldy #23
     4 2081 20 3C 23			jsr zx_print_inv_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    20 2084				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2084 A5 14			lda RTCLOCK_0
     2 2086 18 69 19			add #25
     3 2089			SLEEP_LOOP:
     4 2089 C5 14			cmp RTCLOCK_0
     5 208B D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    21 208D				ZX_PRINT 'L'-32 5 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 208D A9 2C			lda #'L'-32
     2 208F A2 05			ldx #5
     3 2091 A0 17			ldy #23
     4 2093 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    22 2096				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2096 A5 14			lda RTCLOCK_0
     2 2098 18 69 19			add #25
     3 209B			SLEEP_LOOP:
     4 209B C5 14			cmp RTCLOCK_0
     5 209D D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    23 209F				ZX_PRINT_INV 'L'-32 5 23
Macro: ZX_PRINT_INV [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 209F A9 2C			lda #'L'-32
     2 20A1 A2 05			ldx #5
     3 20A3 A0 17			ldy #23
     4 20A5 20 3C 23			jsr zx_print_inv_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    24 20A8				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 20A8 A5 14			lda RTCLOCK_0
     2 20AA 18 69 19			add #25
     3 20AD			SLEEP_LOOP:
     4 20AD C5 14			cmp RTCLOCK_0
     5 20AF D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    25 20B1				ZX_PRINT 'L'-32 5 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 20B1 A9 2C			lda #'L'-32
     2 20B3 A2 05			ldx #5
     3 20B5 A0 17			ldy #23
     4 20B7 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    26 20BA				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 20BA A5 14			lda RTCLOCK_0
     2 20BC 18 69 19			add #25
     3 20BF			SLEEP_LOOP:
     4 20BF C5 14			cmp RTCLOCK_0
     5 20C1 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    27 20C3				ZX_PRINT '"'-32 5 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 20C3 A9 02			lda #'"'-32
     2 20C5 A2 05			ldx #5
     3 20C7 A0 17			ldy #23
     4 20C9 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    28 20CC				ZX_PRINT_INV 'L'-32 6 23
Macro: ZX_PRINT_INV [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 20CC A9 2C			lda #'L'-32
     2 20CE A2 06			ldx #6
     3 20D0 A0 17			ldy #23
     4 20D2 20 3C 23			jsr zx_print_inv_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    29 20D5				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 20D5 A5 14			lda RTCLOCK_0
     2 20D7 18 69 19			add #25
     3 20DA			SLEEP_LOOP:
     4 20DA C5 14			cmp RTCLOCK_0
     5 20DC D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    30 20DE				ZX_PRINT '"'-32 6 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 20DE A9 02			lda #'"'-32
     2 20E0 A2 06			ldx #6
     3 20E2 A0 17			ldy #23
     4 20E4 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    31 20E7				ZX_PRINT_INV 'L'-32 7 23
Macro: ZX_PRINT_INV [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 20E7 A9 2C			lda #'L'-32
     2 20E9 A2 07			ldx #7
     3 20EB A0 17			ldy #23
     4 20ED 20 3C 23			jsr zx_print_inv_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    32 20F0				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 20F0 A5 14			lda RTCLOCK_0
     2 20F2 18 69 19			add #25
     3 20F5			SLEEP_LOOP:
     4 20F5 C5 14			cmp RTCLOCK_0
     5 20F7 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    33 20F9				ZX_PRINT 'L'-32 7 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 20F9 A9 2C			lda #'L'-32
     2 20FB A2 07			ldx #7
     3 20FD A0 17			ldy #23
     4 20FF 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    34 2102				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2102 A5 14			lda RTCLOCK_0
     2 2104 18 69 19			add #25
     3 2107			SLEEP_LOOP:
     4 2107 C5 14			cmp RTCLOCK_0
     5 2109 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    35 210B				ZX_PRINT_INV 'L'-32 7 23
Macro: ZX_PRINT_INV [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 210B A9 2C			lda #'L'-32
     2 210D A2 07			ldx #7
     3 210F A0 17			ldy #23
     4 2111 20 3C 23			jsr zx_print_inv_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    36 2114				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2114 A5 14			lda RTCLOCK_0
     2 2116 18 69 19			add #25
     3 2119			SLEEP_LOOP:
     4 2119 C5 14			cmp RTCLOCK_0
     5 211B D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    37 211D				ZX_PRINT 'L'-32 7 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 211D A9 2C			lda #'L'-32
     2 211F A2 07			ldx #7
     3 2121 A0 17			ldy #23
     4 2123 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    38 2126				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2126 A5 14			lda RTCLOCK_0
     2 2128 18 69 19			add #25
     3 212B			SLEEP_LOOP:
     4 212B C5 14			cmp RTCLOCK_0
     5 212D D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    39 212F				ZX_PRINT_INV 'L'-32 7 23
Macro: ZX_PRINT_INV [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 212F A9 2C			lda #'L'-32
     2 2131 A2 07			ldx #7
     3 2133 A0 17			ldy #23
     4 2135 20 3C 23			jsr zx_print_inv_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    40 2138				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2138 A5 14			lda RTCLOCK_0
     2 213A 18 69 19			add #25
     3 213D			SLEEP_LOOP:
     4 213D C5 14			cmp RTCLOCK_0
     5 213F D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    41 2141				ZX_PRINT 'L'-32 7 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2141 A9 2C			lda #'L'-32
     2 2143 A2 07			ldx #7
     3 2145 A0 17			ldy #23
     4 2147 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    42 214A				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 214A A5 14			lda RTCLOCK_0
     2 214C 18 69 19			add #25
     3 214F			SLEEP_LOOP:
     4 214F C5 14			cmp RTCLOCK_0
     5 2151 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    43 					
    44 					
    45 					
    23 2153				ICL "zx_load.asm"	
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
     1 2153 20 02 75			jsr screen_clear
     2 					
     3 2156				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2156 A5 14			lda RTCLOCK_0
     2 2158 18 69 19			add #25
     3 215B			SLEEP_LOOP:
     4 215B C5 14			cmp RTCLOCK_0
     5 215D D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
     4 215F A9 AC			lda #COLOR_CYAN
     5 2161 8D C8 02			sta GR8_FRAME
     6 2164				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2164 A5 14			lda RTCLOCK_0
     2 2166 18 69 19			add #25
     3 2169			SLEEP_LOOP:
     4 2169 C5 14			cmp RTCLOCK_0
     5 216B D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
     7 216D A9 0E			lda #COLOR_WHITE
     8 216F 8D C8 02			sta GR8_FRAME
     9 					
    10 2172				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2172 A5 14			lda RTCLOCK_0
     2 2174 18 69 19			add #25
     3 2177			SLEEP_LOOP:
     4 2177 C5 14			cmp RTCLOCK_0
     5 2179 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    11 217B A9 AC			lda #COLOR_CYAN
    12 217D 8D C8 02			sta GR8_FRAME
    13 2180				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2180 A5 14			lda RTCLOCK_0
     2 2182 18 69 19			add #25
     3 2185			SLEEP_LOOP:
     4 2185 C5 14			cmp RTCLOCK_0
     5 2187 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    14 2189 A9 0E			lda #COLOR_WHITE
    15 218B 8D C8 02			sta GR8_FRAME
    16
    17 218E				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 218E A5 14			lda RTCLOCK_0
     2 2190 18 69 19			add #25
     3 2193			SLEEP_LOOP:
     4 2193 C5 14			cmp RTCLOCK_0
     5 2195 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    18 2197 A9 AC			lda #COLOR_CYAN
    19 2199 8D C8 02			sta GR8_FRAME
    20
    21 219C				DLI_ENABLE zx_dli_header_block
Macro: DLI_ENABLE [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 219C A9 00 8D 00 02 A9 + 	mwa #ZX_DLI_HEADER_BLOCK VDSLST
     2 21A6 A9 C0			lda #$c0
     3 21A8 8D 0E D4			sta NMIEN
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    22 21AB				SLEEP 75
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 21AB A5 14			lda RTCLOCK_0
     2 21AD 18 69 4B			add #75
     3 21B0			SLEEP_LOOP:
     4 21B0 C5 14			cmp RTCLOCK_0
     5 21B2 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    23 21B4				DLI_DISABLE
Macro: DLI_DISABLE [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 21B4 A9 40			lda #$40
     2 21B6 8D 0E D4			sta NMIEN
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    24 21B9				ZX_PRINT 'P'-32 0 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 21B9 A9 30			lda #'P'-32
     2 21BB A2 00			ldx #0
     3 21BD A0 00			ldy #0
     4 21BF 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    25 21C2				ZX_PRINT 'r'-32 1 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 21C2 A9 52			lda #'r'-32
     2 21C4 A2 01			ldx #1
     3 21C6 A0 00			ldy #0
     4 21C8 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    26 21CB				ZX_PRINT 'o'-32 2 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 21CB A9 4F			lda #'o'-32
     2 21CD A2 02			ldx #2
     3 21CF A0 00			ldy #0
     4 21D1 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    27 21D4				ZX_PRINT 'g'-32 3 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 21D4 A9 47			lda #'g'-32
     2 21D6 A2 03			ldx #3
     3 21D8 A0 00			ldy #0
     4 21DA 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    28 21DD				ZX_PRINT 'r'-32 4 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 21DD A9 52			lda #'r'-32
     2 21DF A2 04			ldx #4
     3 21E1 A0 00			ldy #0
     4 21E3 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    29 21E6				ZX_PRINT 'a'-32 5 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 21E6 A9 41			lda #'a'-32
     2 21E8 A2 05			ldx #5
     3 21EA A0 00			ldy #0
     4 21EC 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    30 21EF				ZX_PRINT 'm'-32 6 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 21EF A9 4D			lda #'m'-32
     2 21F1 A2 06			ldx #6
     3 21F3 A0 00			ldy #0
     4 21F5 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    31 21F8				ZX_PRINT ':'-32 7 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 21F8 A9 1A			lda #':'-32
     2 21FA A2 07			ldx #7
     3 21FC A0 00			ldy #0
     4 21FE 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    32 					
    33 2201				ZX_PRINT 'R'-32 9 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2201 A9 32			lda #'R'-32
     2 2203 A2 09			ldx #9
     3 2205 A0 00			ldy #0
     4 2207 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    34 220A				ZX_PRINT 'A'-32 10 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 220A A9 21			lda #'A'-32
     2 220C A2 0A			ldx #10
     3 220E A0 00			ldy #0
     4 2210 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    35 2213				ZX_PRINT 'I'-32 11 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2213 A9 29			lda #'I'-32
     2 2215 A2 0B			ldx #11
     3 2217 A0 00			ldy #0
     4 2219 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    36 221C				ZX_PRINT 'N'-32 12 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 221C A9 2E			lda #'N'-32
     2 221E A2 0C			ldx #12
     3 2220 A0 00			ldy #0
     4 2222 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    37 2225				ZX_PRINT 'B'-32 13 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2225 A9 22			lda #'B'-32
     2 2227 A2 0D			ldx #13
     3 2229 A0 00			ldy #0
     4 222B 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    38 222E				ZX_PRINT 'O'-32 14 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 222E A9 2F			lda #'O'-32
     2 2230 A2 0E			ldx #14
     3 2232 A0 00			ldy #0
     4 2234 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    39 2237				ZX_PRINT 'W'-32 15 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2237 A9 37			lda #'W'-32
     2 2239 A2 0F			ldx #15
     3 223B A0 00			ldy #0
     4 223D 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    40 2240				ZX_PRINT 'O'-32 16 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2240 A9 2F			lda #'O'-32
     2 2242 A2 10			ldx #16
     3 2244 A0 00			ldy #0
     4 2246 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    41 2249				ZX_PRINT 'M'-32 17 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2249 A9 2D			lda #'M'-32
     2 224B A2 11			ldx #17
     3 224D A0 00			ldy #0
     4 224F 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    42 2252				ZX_PRINT 'I'-32 18 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2252 A9 29			lda #'I'-32
     2 2254 A2 12			ldx #18
     3 2256 A0 00			ldy #0
     4 2258 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    43 225B				ZX_PRINT 'T'-32 19 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 225B A9 34			lda #'T'-32
     2 225D A2 13			ldx #19
     3 225F A0 00			ldy #0
     4 2261 20 76 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    44 2264				SLEEP 100
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2264 A5 14			lda RTCLOCK_0
     2 2266 18 69 64			add #100
     3 2269			SLEEP_LOOP:
     4 2269 C5 14			cmp RTCLOCK_0
     5 226B D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    45 					
    46 					
    47 					
    48 					
    49 					
    24 					
    25 226D 4C 1B 20			jmp zx_loop
    26 					
    27 				;	PM_SHOW
    28
    29 					
    12 2270				ICL 'zx_func.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm
     1 2270 00 00		zx_print_x: dta 0,0
     2 2272 00 00		zx_print_y: dta 0,0
     3 2274 00 00		zx_print_a: dta 0,0
     4
     5 2276			zx_print_func:
     6 2276 8E 70 22			stx zx_print_x 
     7 2279 8C 72 22			sty zx_print_y 
     8 227C 8D 74 22			sta zx_print_a 
     9
    10 227F A9 00 85 F3 A9 72 + 	mwa #image_data_zx_font src
    11 2287 AD 00 75 85 F5 AD + 	mwa screen_adr dst
    12 					
    13 2291 18 A5 F3 6D 74 22 + 	ADW src zx_print_a
    14 22A0 18 A5 F3 6D 74 22 + 	ADW src zx_print_a
    15 22AF 18 A5 F3 6D 74 22 + 	ADW src zx_print_a
    16 22BE 18 A5 F3 6D 74 22 + 	ADW src zx_print_a
    17 22CD 18 A5 F3 6D 74 22 + 	ADW src zx_print_a
    18 22DC 18 A5 F3 6D 74 22 + 	ADW src zx_print_a
    19 22EB 18 A5 F3 6D 74 22 + 	ADW src zx_print_a
    20 22FA 18 A5 F3 6D 74 22 + 	ADW src zx_print_a
    21 					
    22 2309 A5 F6			lda dst+1
    23 230B 6D 72 22			adc zx_print_y
    24 230E 85 F6			sta dst+1
    25
    26 2310 18 A5 F5 6D 70 22 + 	ADW dst zx_print_x
    27 					
    28 231F A2 08			ldx #8
    29 2321 A0 00			ldy #0
    30 2323			zx_print_func_loop:
    31 2323 B1 F3			lda (src),y
    32 2325 91 F5			sta (dst),y
    33 2327 E6 F3 D0 02 E6 F4		INW src
    34 232D 18 A5 F5 69 20 85 + 	ADW dst #32
    35 2338 CA				dex
    36 2339 D0 E8			bne zx_print_func_loop
    37
    38 233B 60				rts
    39
    40 				.MACRO ZX_PRINT letter position_x position_y
    41 					lda #:letter
    42 					ldx #:position_x
    43 					ldy #:position_y
    44 					jsr zx_print_func
    45 				.ENDM
    46
    47 233C			zx_print_inv_func:
    48 233C 8D 74 22			sta zx_print_a 
    49 233F 8E 70 22			stx zx_print_x 
    50 2342 8C 72 22			sty zx_print_y 
    51
    52 2345 A9 00 85 F3 A9 72 + 	mwa #image_data_zx_font src
    53 234D AD 00 75 85 F5 AD + 	mwa screen_adr dst
    54 					
    55 2357 18 A5 F3 6D 74 22 + 	ADW src zx_print_a
    56 2366 18 A5 F3 6D 74 22 + 	ADW src zx_print_a
    57 2375 18 A5 F3 6D 74 22 + 	ADW src zx_print_a
    58 2384 18 A5 F3 6D 74 22 + 	ADW src zx_print_a
    59 2393 18 A5 F3 6D 74 22 + 	ADW src zx_print_a
    60 23A2 18 A5 F3 6D 74 22 + 	ADW src zx_print_a
    61 23B1 18 A5 F3 6D 74 22 + 	ADW src zx_print_a
    62 23C0 18 A5 F3 6D 74 22 + 	ADW src zx_print_a
    63 					
    64 23CF A5 F6			lda dst+1
    65 23D1 6D 72 22			adc zx_print_y
    66 23D4 85 F6			sta dst+1 
    67
    68 23D6 18 A5 F5 6D 70 22 + 	ADW dst zx_print_x
    69 					
    70 23E5 A2 08			ldx #8
    71 23E7 A0 00			ldy #0
    72 23E9			zx_print_inv_func_loop:
    73 23E9 B1 F3			lda (src),y
    74 23EB 49 FF			eor #$ff
    75 23ED 91 F5			sta (dst),y
    76 23EF E6 F3 D0 02 E6 F4		INW src
    77 23F5 18 A5 F5 69 20 85 + 	ADW dst #32
    78 2400 CA				dex
    79 2401 D0 E6			bne zx_print_inv_func_loop
    80
    81 2403 60				rts
    82
    83 				.MACRO ZX_PRINT_INV letter position_x position_y
    84 					lda #:letter
    85 					ldx #:position_x
    86 					ldy #:position_y
    87 					jsr zx_print_inv_func
    88 				.ENDM
    89
    90 						
    13 2404				ICL 'func.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\func.asm
     1 				; copy 256 byte block from src to dst
     2
     3 2404			memcopy_block_func:
     4 2404				REG_PUSH
Macro: REG_PUSH [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2404 48				pha
     2 2405 8A				txa
     3 2406 48				pha
     4 2407 98				tya
     5 2408 48				pha
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\func.asm
     5
     6 2409 A0 00			ldy #0
     7 240B			memcopy_block_loop:	
     8 240B B1 EF		 	lda (memcopy_block_src),y
     9 240D 91 F1		 	sta (memcopy_block_dst),y
    10 240F C8			 	iny
    11 2410 D0 F9		 	bne memcopy_block_loop
    12
    13 2412			 	REG_PULL
Macro: REG_PULL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2412 68				pla
     2 2413 A8				tay
     3 2414 68				pla
     4 2415 AA				tax
     5 2416 68				pla
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\func.asm
    14 2417 60			 	rts
    15
    16 				.MACRO MEMCOPY_BLOCK src dst
    17 					mwa #:src memcopy_block_src
    18 					mwa #:dst memcopy_block_dst
    19 					
    20 					jsr memcopy_block_func
    21 				.ENDM
    14 2418				ICL 'screen_mem.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\screen_mem.asm
     1 2418				org $4000
     2
     3 = 4000			screen_mem_1 = $4000
     4 4000-757F> 00 00 00 00 + 	:2048 dta $0
     5 = 4800			screen_mem_1_1 = $4800
     6 4800 00 00 00 00 00 00 + 	:2048 dta $0
     7 = 5000			screen_mem_1_2 = $5000
     8 5000 00 00 00 00 00 00 + 	:1792 dta $0
     9 5700			screen_mem_zx:
    10 5700 00 00 00 00 00 00 + 	:256 dta $0
    11 					
    12 5800			screen_mem_2
    13 5800 00 00 00 00 00 00 + 	:2048 dta $0
    14 6000			screen_mem_2_1
    15 6000 00 00 00 00 00 00 + 	:2048 dta $0
    16 6800			screen_mem_2_2
    17 6800 00 00 00 00 00 00 + 	:2048 dta $0
    18
    19 7000			image_data_sinclair_research
    20 7000				.local graphics
    21 7000 3C 00 00 00 00 00 + 	ins "..\pic\sinclair_research.gr8"
    22 					.endl
    23 7100			image_data_load_pp_L
    24 7100				.local graphics
    25 7100 00 00 00 00 00 00 + 	ins "..\pic\load_pp_L.gr8"
    26 					.endl
    27 7200			image_data_zx_font
    28 7200				.local graphics
    29 7200 00 00 00 00 00 00 + 	ins "..\pic\zx_font.fnt"
    30 					.endl
    31
    32
    33 7500			screen_adr
    34 7500 00 00			dta 0,0
    35
    36 7502			screen_clear:
    37 7502				REG_PUSH
Macro: REG_PUSH [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 7502 48				pha
     2 7503 8A				txa
     3 7504 48				pha
     4 7505 98				tya
     5 7506 48				pha
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\screen_mem.asm
    38 7507 AD 00 75 8D 1A 75 + 	mwa screen_adr screen_clear_loop_2+1
    39 7513 A9 00			lda #0
    40 7515 A2 18			ldx #24
    41 7517			screen_clear_loop_1
    42 7517 A0 00			ldy #0	
    43 7519			screen_clear_loop_2	
    44 7519 99 00 00			sta $0000,y
    45 751C C8				iny
    46 751D D0 FA			bne screen_clear_loop_2
    47 751F EE 1B 75			inc screen_clear_loop_2+2
    48 7522 CA				dex
    49 7523 D0 F4			bne screen_clear_loop_2
    50 7525				REG_PULL
Macro: REG_PULL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 7525 68				pla
     2 7526 A8				tay
     3 7527 68				pla
     4 7528 AA				tax
     5 7529 68				pla
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\screen_mem.asm
    51 752A 60				rts	
    52
    53 752B			screen_fill:
    54 752B				REG_PUSH
Macro: REG_PUSH [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 752B 48				pha
     2 752C 8A				txa
     3 752D 48				pha
     4 752E 98				tya
     5 752F 48				pha
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\screen_mem.asm
    55 7530 AD 00 75 8D 43 75 + 	mwa screen_adr screen_fill_loop_2+1
    56 753C A9 FF			lda #255
    57 753E A2 18			ldx #24
    58 7540			screen_fill_loop_1
    59 7540 A0 00			ldy #0	
    60 7542			screen_fill_loop_2	
    61 7542 99 00 00			sta $0000,y
    62 7545 C8				iny
    63 7546 D0 FA			bne screen_fill_loop_2
    64 7548 EE 44 75			inc screen_fill_loop_2+2
    65 754B CA				dex
    66 754C D0 F4			bne screen_fill_loop_2
    67 754E				REG_PULL
Macro: REG_PULL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 754E 68				pla
     2 754F A8				tay
     3 7550 68				pla
     4 7551 AA				tax
     5 7552 68				pla
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\screen_mem.asm
    68 7553 60				rts	
    69
    70 					
    71 7554			screen_set_read_1:
    72 					; load display list address to register
    73 7554 A9 00 8D 30 02 A9 + 	mwa #dl_antic_1 DLIST
    74 755E 60				rts
    75 755F			screen_set_write_1:
    76 					; switch working buffer pointer
    77 755F A9 00 8D 00 75 A9 + 	mwa #screen_mem_1 screen_adr
    78 7569 60				rts
    79
    80 756A			screen_set_read_2:
    81 					; load display list address to register
    82 756A A9 CC 8D 30 02 A9 + 	mwa #dl_antic_2 DLIST
    83 7574 60				rts
    84 7575			screen_set_write_2:	
    85 					; switch working buffer pointer
    86 7575 A9 00 8D 00 75 A9 + 	mwa #screen_mem_2 screen_adr
    87 757F 60				rts
    88 					
    15 7580				ICL 'display_list.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\display_list.asm
     1 7580				ICL 'display_list_const.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\display_list_const.asm
     1 = 0012			RTCLOCK_2 = $12
     2 = 0013			RTCLOCK_1 = $13
     3 = 0014			RTCLOCK_0 = $14
     4
     5 = 0230			DLIST   = $230
     6 = 0230			DLISTL  = $230 ; display list pointer low byte
     7 = 0231			DLISTH  = $231 ;                      high byte
     8 = 02C8			COLRBK  = $2C8
     9
    10 = D016			COLPF0	= $D016  
    11 = D017			COLPF1	= $D017  
    12 = D018			COLPF2	= $D018  
    13 = D019			COLPF3	= $D019
    14 = D01A			COLBG	= $D01A 
    15
    16 = 02C4			COLOR0	= $02C4
    17 = 02C5			COLOR1	= $02C5
    18 = 02C6			COLOR2	= $02C6
    19 = 02C7			COLOR3	= $02C7
    20 = 02C8			COLOR4 	= $02C8
    21
    22 = 022F			SDMCTL  = $022F
    23 = 022F			DMACTLS = $022F
    24 = D400			DMACTL  = $D400
    25 = 0200			VDSLST  = $0200 ; display list interrupt vector
    26 = D40E			NMEN	= $D40E
    27 = D40E			NMIEN	= $D40E ; bit 7
    28 = D40A			WSYNC   = $D40A
    29 = D40B			VCOUNT  = $D40B
    30
    31 = 02C5			GR8_PEN   = COLOR1
    32 = 02C6			GR8_PAPER = COLOR2
    33 = 02C8			GR8_FRAME = COLOR4 
    34
    35 = D017			DLI_PEN   = COLPF1
    36 = D018			DLI_PAPER = COLPF2
    37 = D01A			DLI_FRAME = COLBG 
    38
    39 = 0000			COLOR_BLACK = $00
    40 = 000E			COLOR_WHITE = $0E
    41 = 00AC			COLOR_CYAN  = $ac
    42 = 0043			COLOR_RED   = $43
    43
    44 = D012			COLPM0	= $D012
    45 = D013			COLPM1	= $D013
    46 = D014			COLPM2	= $D014
    47 = D015			COLPM3	= $D015
    48
    49 = 02C0			COLPM0S	= $02C0
    50 = 02C1			COLPM1S	= $02C1
    51 = 02C2			COLPM2S	= $02C2
    52 = 02C3			COLPM3S	= $02C3
    53
    54
    55 = D008			SIZEP0	= $D008
    56 = D009			SIZEP1	= $D009
    57 = D00A			SIZEP2	= $D00A
    58 = D00B			SIZEP3	= $D00B
    59
    60 = D00C			SIZEM	= $D00C
    61
    62 = D000			HPOSP0	= $D000
    63 = D001			HPOSP1	= $D001
    64 = D002			HPOSP2	= $D002
    65 = D003			HPOSP3	= $D003
    66
    67 = D004			HPOSM0	= $D004
    68 = D005			HPOSM1	= $D005
    69 = D006			HPOSM2	= $D006
    70 = D007			HPOSM3	= $D007
    71
    72 = D01C			VDELAY	= $D01C
    73
    74 = D01B			GTIACTL	= $D01B
    75 = 026F			GTIACTLS = $026F
    76
    77 = D01D			PMCTL	= $D01D
    78
    79 = D407			PMBASE = $D407
    80
    81 				;     SAVMSC $0058,2       (88): pointer to current screen for CIO commands
    82 				;     RAMTOP $006A        (106): start-of-ROM pointer (MSB only)
    83 				;     VDSLST $0200,2      (512): DLI vector
    84 				;     RAMSIZ $02E4        (740): permanent start-of-ROM pointer (MSB only)
    85 				;     DLISTL $D402      (54274): display list pointer low byte
    86 				;     DLISTH $D403      (54275):     "    high byte
    87 				;     HSCROL $D404      (54276): horizontal scroll register
    88 				;     VSCROL $D405      (54277): vertical scroll register
    89 				;     NMIEN  $D40E      (54286): NMI enable (DLIs)
    90 				;     
    91 				;     
    92 				;                               Shadow registers
    93 				;     
    94 				;     
    95 				;     SDLSTL $0230        (560): DLISTL
    96 				;     SDLSTH $0231        (561): DLISTH
     2
     3 7580				org $3800
     4
     5 = 0080			DL_DLI = $80
     6
     7 				; DL for first buffer	
     8 3800-39C8> F0 70 70	dl_antic_1	dta $F0,$70,$70              ; 3x8 empty scanlines
     9 3803 4F 00 40				dta b($4f),a(screen_mem_1)   ; $0f - mode, $40 - addr of 1/3 screen bitmap 
    10 3806 0F 0F 0F 0F 0F 0F + 		:62 dta b($0f)               ; 63 lines of $0f 
    11 3844 0F					dta b($0f)                   ; 1 line of $0f + DLI 
    12 3845 4F 00 48				dta b($4f),a(screen_mem_1_1) ; $0f - mode, $40 - addr of 2/3 screen bitmap
    13 3848 0F 0F 0F 0F 0F 0F + 		:63 dta b($0f)	             ; 63 lines of $0f 
    14 3887 4F 00 50				dta b($4f),a(screen_mem_1_2) ; $0f - mode, $40 - addr of 3/3 screen bitmap
    15 388A 0F 0F 0F 0F 0F 0F + 		:63 dta b($0f)               ; 63 lines of $0f
    16 						;dta b($c1),a(dl_antic_1)     ; jump to DL start and trigger interrupt
    17 38C9 41 00 38				dta b($41),a(dl_antic_1)     ; jump to DL start
    18 38CC 70 70 70		dl_antic_2	dta $70,$70,$70              ; 3x8 empty scanlines 
    19 38CF CF 00 58				dta b($cf),a(screen_mem_2)   ; $0f - mode, $40 - addr of 1/3 screen bitmap
    20 38D2 0F 0F 0F 0F 0F 0F + 		:63 dta b($0f)               ; 63 lines of $0f 
    21 3911 4F 00 60				dta b($4f),a(screen_mem_2_1) ; $0f - mode, $40 - addr of 2/3 screen bitmap
    22 3914 0F 0F 0F 0F 0F 0F + 		:63 dta b($0f)	             ; 63 lines of $0f 
    23 3953 4F 00 68				dta b($4f),a(screen_mem_2_2) ; $0f - mode, $40 - addr of 3/3 screen bitmap
    24 3956 0F 0F 0F 0F 0F 0F + 		:63 dta b($0f)               ; 63 lines of $0f 
    25 						;dta b($c1),a(dl_antic_2)     ; jump to DL start and trigger interrupt
    26 3995 41 CC 38				dta b($41),a(dl_antic_2)     ; jump to DL start 
    27
    28 3998			dl_set_mode
    29 					; set screen width to 32 byte
    30 				;	lda #%11111100
    31 				;	and DMACTLS
    32 				;	ora #%00000001
    33 3998 A9 39			lda #57
    34 399A 8D 2F 02			sta DMACTLS
    35
    36 399D A9 00			lda #COLOR_BLACK     
    37 399F 8D C5 02			sta GR8_PEN
    38 39A2 A9 00			lda #COLOR_BLACK     
    39 39A4 8D C6 02			sta GR8_PAPER
    40 39A7 A9 00			lda #COLOR_BLACK     
    41 39A9 8D C8 02			sta GR8_FRAME
    42 					
    43 39AC A9 0E			lda #COLOR_WHITE
    44 39AE 8D C5 02			sta COLOR1
    45 39B1 A9 00			lda #COLOR_BLACK
    46 39B3 8D C6 02			sta COLOR2
    47 					
    48
    49 39B6 60				rts
    50
    51 						
    16 39B7				ICL 'wait_vsync.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\wait_vsync.asm
     1
     2
     3 39B7			wait_hsync:
     4
     5 39B7 48				pha
     6
     7 39B8 A9 52			lda #$52
     8 39BA 8D 0A D4			sta WSYNC	;WAIT
     9 39BD 68				pla
    10
    11 39BE 60				rts
    12
    13
    14 39BF			wait_vsync:
    15 39BF 48				pha
    16 39C0			wait_vsync_loop:
    17 39C0 AD 0B D4			lda VCOUNT
    18 39C3 C9 64			cmp #100
    19 39C5 D0 F9			bne wait_vsync_loop 
    20 					
    21 39C7 68				pla
    22 39C8 60				rts
    23 					
    17 39C9				ICL 'math.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\math.asm
     1 39C9				org $1D00
     2 					
     3 				;MATH_SIN_LEN = 16
     4 				;MATH_SIN_MASK = %00001111	
     5 				; math_sin dta 127,176,218,245,255,245,218,176,127,78,36,9,0,9,36,78
     6 				; math_sin dta 128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79
     7 				        
     8 				;MATH_SIN_LEN = 64
     9 				;MATH_SIN_MASK = %00111111	
    10 				;math_sin dta 128,140,152,165,176,188,198,208,218,226,234,240,245,250,253,254,255,254,253,250,245,240,234,226,218,208,198,188,176,165,152,140,128,115,103,90,79,67,57,47,37,29,21,15,10,5,2,1,0,1,2,5,10,15,21,29,37,47,57,67,79,90,103,115
    11
    12 = 0100			MATH_SIN_LEN = 256
    13 = 00FF			MATH_SIN_MASK = %11111111	
    14 1D00-1F0F> 80 83 86 89 + math_sin dta 128,131,134,137,140,143,146,149,152,155,158,162,165,167,170,173,176,179,182,185,188,190,193,196,198,201,203,206,208,211,213,215,218,220,222,224,226,228,230,232,234,235,237,238,240,241,243,244,245,246,248,249,250,250,251,252,253,253,254,254,254,255,0,0,0,0,0,255,254,254,254,253,253,252,251,250,250,249,248,246,245,244,243,241,240,238,237,235,234,232,230,228,226,224,222,220,218,215,213,211,208,206,203,201,198,196,193,190,188,185,182,179,176,173,170,167,165,162,158,155,152,149,146,143,140,137,134,131,128,124,121,118,115,112,109,106,103,100,97,93,90,88,85,82,79,76,73,70,67,65,62,59,57,54,52,49,47,44,42,40,37,35,33,31,29,27,25,23,21,20,18,17,15,14,12,11,10,9,7,6,5,5,4,3,2,2,1,1,1,0,0,0,0,0,0,0,1,1,1,2,2,3,4,5,5,6,7,9,10,11,12,14,15,17,18,20,21,23,25,27,29,31,33,35,37,40,42,44,47,49,52,54,57,59,62,65,67,70,73,76,79,82,85,88,90,93,97,100,103,106,109,112,115,118,121,124
    15
    16 = 0010			MATH_SIN_LEN_16 = 16
    17 = 000F			MATH_SIN_MASK_16 = %00001111	
    18 1E00 80 B0 DA F5 FF F5 + math_sin_16 dta 128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79
    19
    20 1F00 C0 C0 60 40 30 27 + math_192_div dta 192,192,96,64,48,39,32,28,24,22,20,18,16,15,14,13
    18 1F10				ICL 'zero.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zero.asm
     1 1F10				org $e0
     2
     3 00E0-00F8> 00		zero_a	dta 0
     4 00E1 00			zero_x	dta 0
     5 00E2 00			zero_y	dta 0
     6 00E3 00			zero_1	dta 0
     7 00E4 00			zero_2	dta 0
     8 00E5 00			zero_3	dta 0
     9 00E6 00			bar_size dta 0
    10 00E7 00			bar_color1 dta 0
    11 00E8 00			bar_color2 dta 0
    12 00E9 00			bar_color10 dta 0
    13 00EA 00			bar_color20 dta 0
    14 00EB			part1_image_data_address: 
    15 00EB 00 00			dta 0,0
    16 00ED			part1_screen_data_address: 
    17 00ED 00 00			dta 0,0
    18 00EF			memcopy_block_src:
    19 00EF 00 00			dta 0,0
    20 00F1			memcopy_block_dst:
    21 00F1 00 00			dta 0,0
    22 00F3			src:
    23 00F3 00 00			dta 0,0
    24 00F5			dst:
    25 00F5 00 00			dta 0,0
    26 00F7			tmp_word:
    27 00F7 00 00			dta 0,0
    28 					
    19 00F9				ICL 'ghosts.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\ghosts.asm
     1 00F9				org $6000
     2
     3 6000			pm_base:
     4 6000-6839> FF FF FF FF + 	:768 dta $FF
     5 6300			pm_missle:
     6 6300 FF FF FF FF FF FF + 	:256 dta $FF
     7 6400			pm_player0:
     8 6400 FF FF FF FF FF FF + 	:256 dta $FF
     9 6500			pm_player1:
    10 6500 FF FF FF FF FF FF + 	:256 dta $FF
    11 6600			pm_player2:
    12 6600 FF FF FF FF FF FF + 	:256 dta $FF
    13 6700			pm_player3:
    14 6700 FF FF FF FF FF FF + 	:256 dta $FF
    15 					
    16 				.MACRO PM_SHOW
    17 				
    18 				;	lda #$60
    19 				;	sta PMBASE
    20 				;	lda #0
    21 				;	sta SIZEP0
    22 				;	lda #COLOR_WHITE
    23 				;	sta COLPM0
    24 				;	sta COLPM0S
    25 				;	lda #100
    26 				;	sta HPOSP0
    27 				;	lda #3
    28 				;	sta PMCTL
    29 				;	lda #1
    30 				;	sta GTIACTL
    31 				
    32 				;	lda DMACTLS
    33 				;	ora #%00011000
    34 				;	sta DMACTLS
    35 				
    36 				
    37 					lda #$60
    38 					sta 54279	; PMBASE
    39 				
    40 					lda #1
    41 					sta 623		; GTIACTL
    42 				
    43 					lda #14
    44 					sta 704		; KOLOR
    45 				
    46 					; szerokoœæ
    47 					lda #0
    48 					sta SIZEP0	; SIZEP0
    49 					lda #1
    50 					sta SIZEP1	; SIZEP0
    51 					lda #1
    52 					sta SIZEP2	; SIZEP0
    53 					lda #0
    54 					sta SIZEP3	; SIZEP0
    55 				
    56 					lda #2
    57 					sta 53277	; PMCTL
    58 				
    59 					lda #57
    60 					sta 559		; DMACTLS
    61 				
    62 					; 64 - begin
    63 					; 4,8,12,16
    64 					lda #68
    65 					sta HPOSP0 
    66 				
    67 					lda #88
    68 					sta HPOSP1 
    69 				
    70 					lda #150
    71 					sta HPOSP2 
    72 				
    73 					lda #180
    74 					sta HPOSP3 
    75 				
    76 				.ENDM
    77
    78 				.MACRO PM_MOVE
    79 					lda RTCLOCK_0
    80 					sta 53248
    81 				.ENDM
    82
    20 6800				ICL 'zx_dli.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_dli.asm
     1
     2 6800			zx_dli_header_block:
     3
     4 6800				REG_PUSH
Macro: REG_PUSH [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 6800 48				pha
     2 6801 8A				txa
     3 6802 48				pha
     4 6803 98				tya
     5 6804 48				pha
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_dli.asm
     5
     6 					; 192 screen lines
     7 6805 A0 F0			ldy #240
     8 6807			zx_dli_header_block_loop1:	
     9 6807 B1 14			lda (RTCLOCK_0),y
    10 6809 69 05			adc #5
    11 680B 29 0F			and #$0f
    12 680D A2 43			ldx #COLOR_RED
    13 680F 8E 1A D0			stx DLI_FRAME
    14 6812			zx_dli_header_block_loop2:	
    15 6812				LINE_WAIT
Macro: LINE_WAIT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 6812 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_dli.asm
    16 6815 88				dey
    17 6816 F0 1C			beq zx_dli_header_block_end
    18 6818 E9 01			sbc #1
    19 681A D0 F6			bne zx_dli_header_block_loop2
    20
    21 681C			zx_dli_header_block_loop3:	
    22 681C B1 14			lda (RTCLOCK_0),y
    23 681E 69 05			adc #5
    24 6820 29 0F			and #$0f
    25 6822 A2 AC			ldx #COLOR_CYAN
    26 6824 8E 1A D0			stx DLI_FRAME
    27 6827			zx_dli_header_block_loop4:	
    28 6827				LINE_WAIT
Macro: LINE_WAIT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 6827 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_dli.asm
    29 682A 88				dey
    30 682B F0 07			beq zx_dli_header_block_end
    31 682D E9 01			sbc #1
    32 682F D0 F6			bne zx_dli_header_block_loop4
    33 					
    34 6831 4C 07 68			jmp zx_dli_header_block_loop1
    35
    36 6834			zx_dli_header_block_end:
    37 6834				REG_PULL
Macro: REG_PULL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 6834 68				pla
     2 6835 A8				tay
     3 6836 68				pla
     4 6837 AA				tax
     5 6838 68				pla
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_dli.asm
    38 6839 40				rti
    39 					
    40 					
    41 					
    21
    22 				;	org $8000
    23 				;image_data:	
    24 				;	.local graphics
    25 				;	ins "..\pic\unicorn2.gr8"
    26 				;	.endl
    27 					
