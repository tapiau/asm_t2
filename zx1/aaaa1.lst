mads 2.0.6 build 58 (28 Jan 17)
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\aaaa1.asm
     1 					ICL 'macro.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm
     1 				.MACRO REG_PUSH 
     2 					pha
     3 					txa
     4 					pha
     5 					tya
     6 					pha
     7 				.ENDM
     8
     9 				.MACRO REG_PULL
    10 					pla
    11 					tay
    12 					pla
    13 					tax
    14 					pla
    15 				.ENDM
    16
    17 				.MACRO SLEEP frames
    18 					lda RTCLOCK_0
    19 					add #:frames
    20 				SLEEP_LOOP:
    21 					cmp RTCLOCK_0
    22 					bne SLEEP_LOOP
    23 				.ENDM
    24
    25 				.MACRO LINE_SPACE_9_CYCLES
    26 					nop
    27 					nop
    28 					nop
    29 					sta bar_color20	; 3 cycles
    30 				.ENDM
    31
    32 				.MACRO LINE_SPACE_10_CYCLES
    33 					nop
    34 					nop
    35 					nop
    36 					nop
    37 					nop
    38 				.ENDM
    39
    40 				.MACRO LINE_SPACE_11_CYCLES
    41 					nop
    42 					nop
    43 					nop
    44 					nop
    45 					sta bar_color20	; 3 cycles
    46 				.ENDM
    47
    48 				.MACRO LINE_WAIT
    49 					sta WSYNC	;WAIT
    50 				.ENDM
    51
    52 				.MACRO LINE_COLOR_CALC
    53 					dex
    54 					dey
    55 				.ENDM
    56
    57 				.MACRO LINE_NOP_HALF
    58 					LINE_WAIT
    59 				
    60 					;; 4 nops
    61 					LINE_COLOR_CALC
    62 					
    63 					LINE_NOP_SPACE_1
    64 					
    65 					sta bar_color20	; 3 cycles
    66 					stx DLI_PAPER	; 4 cycles
    67 				;	stx DLI_PEN	; 4 cycles
    68 					LINE_NOP_SPACE_2
    69 					sty DLI_PAPER	; 4 cycles
    70 				;	sty DLI_PEN	; 4 cycles
    71 				.ENDM
    72
    73 				.MACRO LINE_NOP_NORMAL
    74 					LINE_WAIT
    75 					LINE_COLOR_CALC
    76 					sty COLPM0
    77 					sty COLPM1
    78 					stx COLPM2
    79 					stx COLPM3
    80 					stx DLI_PAPER	; 4 cycles
    81 					LINE_SPACE_10_CYCLES
    82 					nop
    83 					sty DLI_PAPER	; 4 cycles
    84 				.ENDM
    85
    86 				.MACRO LINE_NOP_SHORT
    87 					LINE_WAIT
    88 					LINE_COLOR_CALC
    89 					sty COLPM0
    90 					sty COLPM1
    91 					stx COLPM2
    92 					stx COLPM3
    93 					stx DLI_PAPER	; 4 cycles
    94 					LINE_SPACE_10_CYCLES
    95 					sty DLI_PAPER	; 4 cycles
    96 				.ENDM
    97
    98 				.MACRO LINE_NOP_LAST
    99 					LINE_WAIT
   100 					stx DLI_PAPER	; 4 cycles
   101 					lda #1
   102 					sta COLPM0
   103 					sta COLPM1
   104 					sta COLPM2
   105 					sta COLPM3
   106 					LINE_SPACE_10_CYCLES
   107 					nop
   108 					sty DLI_PAPER	; 4 cycles
   109 				.ENDM
   110
   111 				.MACRO DLI_ENABLE handler
   112 					mwa #:handler VDSLST
   113 					lda #$c0
   114 					sta NMIEN
   115 				.ENDM
   116
   117 				.MACRO DLI_DISABLE
   118 					lda #$40
   119 					sta NMIEN
   120 				.ENDM
     2
     3 					org $2000
     4
     5 					.proc main
     6 					
     7 FFFF> 2000-240E> 20 98 + 	jsr dl_set_mode
     8 					
     9 				;	jsr zx
    10 2003 20 07 68			jsr part1
    11
    12 					.endp
    13 					
    14 2006				ICL 'zx.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx.asm
     1 2006			zx:
     2 2006 A9 00			lda #COLOR_BLACK     
     3 2008 8D C5 02			sta GR8_PEN
     4 200B A9 0E			lda #COLOR_WHITE     
     5 200D 8D C6 02			sta GR8_PAPER
     6 2010 A9 0E			lda #COLOR_WHITE     
     7 2012 8D C8 02			sta GR8_FRAME
     8
     9 2015 20 5F 8C			jsr screen_set_write_1
    10 2018 20 54 8C			jsr screen_set_read_1
    11 					
    12 201B			zx_loop:
    13
    14 201B				ICL "zx_boot.asm"
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
     1 201B A9 0E			lda #COLOR_WHITE
     2 201D 8D C8 02			sta GR8_FRAME
     3 2020 20 2B 8C			jsr screen_fill
     4 2023				SLEEP 50
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2023 A5 14			lda RTCLOCK_0
     2 2025 18 69 32			add #50
     3 2028			SLEEP_LOOP:
     4 2028 C5 14			cmp RTCLOCK_0
     5 202A D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
     5 202C 20 02 8C			jsr screen_clear
     6 					
     7 202F				MEMCOPY_BLOCK image_data_sinclair_research screen_mem_zx
Macro: MEMCOPY_BLOCK [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\func.asm]
     1 202F A9 00 85 EF A9 88 + 	mwa #IMAGE_DATA_SINCLAIR_RESEARCH memcopy_block_src
     2 2037 A9 00 85 F1 A9 57 + 	mwa #SCREEN_MEM_ZX memcopy_block_dst
     4 203F 20 FB 23			jsr memcopy_block_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
     8 2042				SLEEP 50
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2042 A5 14			lda RTCLOCK_0
     2 2044 18 69 32			add #50
     3 2047			SLEEP_LOOP:
     4 2047 C5 14			cmp RTCLOCK_0
     5 2049 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
     9
    10 204B 20 02 8C			jsr screen_clear
    11 				;	MEMCOPY_BLOCK image_data_load_pp_L screen_mem_zx
    12 				;	SLEEP 50
    13 					
    14 204E				ZX_PRINT 'L'-32 0 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 204E A9 2C			lda #'L'-32
     2 2050 A2 00			ldx #0
     3 2052 A0 17			ldy #23
     4 2054 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    15 2057				ZX_PRINT 'O'-32 1 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2057 A9 2F			lda #'O'-32
     2 2059 A2 01			ldx #1
     3 205B A0 17			ldy #23
     4 205D 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    16 2060				ZX_PRINT 'A'-32 2 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2060 A9 21			lda #'A'-32
     2 2062 A2 02			ldx #2
     3 2064 A0 17			ldy #23
     4 2066 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    17 2069				ZX_PRINT 'D'-32 3 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2069 A9 24			lda #'D'-32
     2 206B A2 03			ldx #3
     3 206D A0 17			ldy #23
     4 206F 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    18 2072				ZX_PRINT ' '-32 4 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2072 A9 00			lda #' '-32
     2 2074 A2 04			ldx #4
     3 2076 A0 17			ldy #23
     4 2078 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    19 207B				ZX_PRINT_INV 'L'-32 5 23
Macro: ZX_PRINT_INV [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 207B A9 2C			lda #'L'-32
     2 207D A2 05			ldx #5
     3 207F A0 17			ldy #23
     4 2081 20 33 23			jsr zx_print_inv_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    20 2084				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2084 A5 14			lda RTCLOCK_0
     2 2086 18 69 19			add #25
     3 2089			SLEEP_LOOP:
     4 2089 C5 14			cmp RTCLOCK_0
     5 208B D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    21 208D				ZX_PRINT 'L'-32 5 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 208D A9 2C			lda #'L'-32
     2 208F A2 05			ldx #5
     3 2091 A0 17			ldy #23
     4 2093 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    22 2096				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2096 A5 14			lda RTCLOCK_0
     2 2098 18 69 19			add #25
     3 209B			SLEEP_LOOP:
     4 209B C5 14			cmp RTCLOCK_0
     5 209D D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    23 209F				ZX_PRINT_INV 'L'-32 5 23
Macro: ZX_PRINT_INV [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 209F A9 2C			lda #'L'-32
     2 20A1 A2 05			ldx #5
     3 20A3 A0 17			ldy #23
     4 20A5 20 33 23			jsr zx_print_inv_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    24 20A8				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 20A8 A5 14			lda RTCLOCK_0
     2 20AA 18 69 19			add #25
     3 20AD			SLEEP_LOOP:
     4 20AD C5 14			cmp RTCLOCK_0
     5 20AF D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    25 20B1				ZX_PRINT 'L'-32 5 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 20B1 A9 2C			lda #'L'-32
     2 20B3 A2 05			ldx #5
     3 20B5 A0 17			ldy #23
     4 20B7 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    26 20BA				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 20BA A5 14			lda RTCLOCK_0
     2 20BC 18 69 19			add #25
     3 20BF			SLEEP_LOOP:
     4 20BF C5 14			cmp RTCLOCK_0
     5 20C1 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    27 20C3				ZX_PRINT '"'-32 5 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 20C3 A9 02			lda #'"'-32
     2 20C5 A2 05			ldx #5
     3 20C7 A0 17			ldy #23
     4 20C9 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    28 20CC				ZX_PRINT_INV 'L'-32 6 23
Macro: ZX_PRINT_INV [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 20CC A9 2C			lda #'L'-32
     2 20CE A2 06			ldx #6
     3 20D0 A0 17			ldy #23
     4 20D2 20 33 23			jsr zx_print_inv_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    29 20D5				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 20D5 A5 14			lda RTCLOCK_0
     2 20D7 18 69 19			add #25
     3 20DA			SLEEP_LOOP:
     4 20DA C5 14			cmp RTCLOCK_0
     5 20DC D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    30 20DE				ZX_PRINT '"'-32 6 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 20DE A9 02			lda #'"'-32
     2 20E0 A2 06			ldx #6
     3 20E2 A0 17			ldy #23
     4 20E4 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    31 20E7				ZX_PRINT_INV 'L'-32 7 23
Macro: ZX_PRINT_INV [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 20E7 A9 2C			lda #'L'-32
     2 20E9 A2 07			ldx #7
     3 20EB A0 17			ldy #23
     4 20ED 20 33 23			jsr zx_print_inv_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    32 20F0				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 20F0 A5 14			lda RTCLOCK_0
     2 20F2 18 69 19			add #25
     3 20F5			SLEEP_LOOP:
     4 20F5 C5 14			cmp RTCLOCK_0
     5 20F7 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    33 20F9				ZX_PRINT 'L'-32 7 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 20F9 A9 2C			lda #'L'-32
     2 20FB A2 07			ldx #7
     3 20FD A0 17			ldy #23
     4 20FF 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    34 2102				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2102 A5 14			lda RTCLOCK_0
     2 2104 18 69 19			add #25
     3 2107			SLEEP_LOOP:
     4 2107 C5 14			cmp RTCLOCK_0
     5 2109 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    35 210B				ZX_PRINT_INV 'L'-32 7 23
Macro: ZX_PRINT_INV [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 210B A9 2C			lda #'L'-32
     2 210D A2 07			ldx #7
     3 210F A0 17			ldy #23
     4 2111 20 33 23			jsr zx_print_inv_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    36 2114				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2114 A5 14			lda RTCLOCK_0
     2 2116 18 69 19			add #25
     3 2119			SLEEP_LOOP:
     4 2119 C5 14			cmp RTCLOCK_0
     5 211B D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    37 211D				ZX_PRINT 'L'-32 7 23
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 211D A9 2C			lda #'L'-32
     2 211F A2 07			ldx #7
     3 2121 A0 17			ldy #23
     4 2123 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    38 2126				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2126 A5 14			lda RTCLOCK_0
     2 2128 18 69 19			add #25
     3 212B			SLEEP_LOOP:
     4 212B C5 14			cmp RTCLOCK_0
     5 212D D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_boot.asm
    39 					
    40 					
    41 					
    15 212F				ICL "zx_load.asm"	
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
     1 212F 20 02 8C			jsr screen_clear
     2 					
     3 2132				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2132 A5 14			lda RTCLOCK_0
     2 2134 18 69 19			add #25
     3 2137			SLEEP_LOOP:
     4 2137 C5 14			cmp RTCLOCK_0
     5 2139 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
     4 213B A9 AC			lda #COLOR_CYAN
     5 213D 8D C8 02			sta GR8_FRAME
     6 2140				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2140 A5 14			lda RTCLOCK_0
     2 2142 18 69 19			add #25
     3 2145			SLEEP_LOOP:
     4 2145 C5 14			cmp RTCLOCK_0
     5 2147 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
     7 2149 A9 0E			lda #COLOR_WHITE
     8 214B 8D C8 02			sta GR8_FRAME
     9 					
    10 214E				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 214E A5 14			lda RTCLOCK_0
     2 2150 18 69 19			add #25
     3 2153			SLEEP_LOOP:
     4 2153 C5 14			cmp RTCLOCK_0
     5 2155 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    11 2157 A9 AC			lda #COLOR_CYAN
    12 2159 8D C8 02			sta GR8_FRAME
    13 215C				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 215C A5 14			lda RTCLOCK_0
     2 215E 18 69 19			add #25
     3 2161			SLEEP_LOOP:
     4 2161 C5 14			cmp RTCLOCK_0
     5 2163 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    14 2165 A9 0E			lda #COLOR_WHITE
    15 2167 8D C8 02			sta GR8_FRAME
    16
    17 216A				SLEEP 25
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 216A A5 14			lda RTCLOCK_0
     2 216C 18 69 19			add #25
     3 216F			SLEEP_LOOP:
     4 216F C5 14			cmp RTCLOCK_0
     5 2171 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    18 2173 A9 AC			lda #COLOR_CYAN
    19 2175 8D C8 02			sta GR8_FRAME
    20
    21 2178				DLI_ENABLE zx_dli_header_block
Macro: DLI_ENABLE [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2178 A9 B3 8D 00 02 A9 + 	mwa #ZX_DLI_HEADER_BLOCK VDSLST
     2 2182 A9 C0			lda #$c0
     3 2184 8D 0E D4			sta NMIEN
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    22 2187				SLEEP 175
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2187 A5 14			lda RTCLOCK_0
     2 2189 18 69 AF			add #175
     3 218C			SLEEP_LOOP:
     4 218C C5 14			cmp RTCLOCK_0
     5 218E D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    23 2190				DLI_DISABLE
Macro: DLI_DISABLE [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2190 A9 40			lda #$40
     2 2192 8D 0E D4			sta NMIEN
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    24 					
    25 2195				ZX_PRINT 'P'-32 0 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2195 A9 30			lda #'P'-32
     2 2197 A2 00			ldx #0
     3 2199 A0 00			ldy #0
     4 219B 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    26 219E				ZX_PRINT 'r'-32 1 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 219E A9 52			lda #'r'-32
     2 21A0 A2 01			ldx #1
     3 21A2 A0 00			ldy #0
     4 21A4 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    27 21A7				ZX_PRINT 'o'-32 2 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 21A7 A9 4F			lda #'o'-32
     2 21A9 A2 02			ldx #2
     3 21AB A0 00			ldy #0
     4 21AD 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    28 21B0				ZX_PRINT 'g'-32 3 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 21B0 A9 47			lda #'g'-32
     2 21B2 A2 03			ldx #3
     3 21B4 A0 00			ldy #0
     4 21B6 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    29 21B9				ZX_PRINT 'r'-32 4 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 21B9 A9 52			lda #'r'-32
     2 21BB A2 04			ldx #4
     3 21BD A0 00			ldy #0
     4 21BF 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    30 21C2				ZX_PRINT 'a'-32 5 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 21C2 A9 41			lda #'a'-32
     2 21C4 A2 05			ldx #5
     3 21C6 A0 00			ldy #0
     4 21C8 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    31 21CB				ZX_PRINT 'm'-32 6 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 21CB A9 4D			lda #'m'-32
     2 21CD A2 06			ldx #6
     3 21CF A0 00			ldy #0
     4 21D1 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    32 21D4				ZX_PRINT ':'-32 7 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 21D4 A9 1A			lda #':'-32
     2 21D6 A2 07			ldx #7
     3 21D8 A0 00			ldy #0
     4 21DA 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    33 					
    34 21DD				ZX_PRINT 'R'-32 9 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 21DD A9 32			lda #'R'-32
     2 21DF A2 09			ldx #9
     3 21E1 A0 00			ldy #0
     4 21E3 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    35 21E6				ZX_PRINT 'A'-32 10 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 21E6 A9 21			lda #'A'-32
     2 21E8 A2 0A			ldx #10
     3 21EA A0 00			ldy #0
     4 21EC 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    36 21EF				ZX_PRINT 'I'-32 11 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 21EF A9 29			lda #'I'-32
     2 21F1 A2 0B			ldx #11
     3 21F3 A0 00			ldy #0
     4 21F5 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    37 21F8				ZX_PRINT 'N'-32 12 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 21F8 A9 2E			lda #'N'-32
     2 21FA A2 0C			ldx #12
     3 21FC A0 00			ldy #0
     4 21FE 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    38 2201				ZX_PRINT 'B'-32 13 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2201 A9 22			lda #'B'-32
     2 2203 A2 0D			ldx #13
     3 2205 A0 00			ldy #0
     4 2207 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    39 220A				ZX_PRINT 'O'-32 14 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 220A A9 2F			lda #'O'-32
     2 220C A2 0E			ldx #14
     3 220E A0 00			ldy #0
     4 2210 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    40 2213				ZX_PRINT 'W'-32 15 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2213 A9 37			lda #'W'-32
     2 2215 A2 0F			ldx #15
     3 2217 A0 00			ldy #0
     4 2219 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    41 221C				ZX_PRINT 'O'-32 16 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 221C A9 2F			lda #'O'-32
     2 221E A2 10			ldx #16
     3 2220 A0 00			ldy #0
     4 2222 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    42 2225				ZX_PRINT 'M'-32 17 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2225 A9 2D			lda #'M'-32
     2 2227 A2 11			ldx #17
     3 2229 A0 00			ldy #0
     4 222B 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    43 222E				ZX_PRINT 'I'-32 18 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 222E A9 29			lda #'I'-32
     2 2230 A2 12			ldx #18
     3 2232 A0 00			ldy #0
     4 2234 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    44 2237				ZX_PRINT 'T'-32 19 0
Macro: ZX_PRINT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm]
     1 2237 A9 34			lda #'T'-32
     2 2239 A2 13			ldx #19
     3 223B A0 00			ldy #0
     4 223D 20 6D 22			jsr zx_print_func
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    45 2240				SLEEP 100
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2240 A5 14			lda RTCLOCK_0
     2 2242 18 69 64			add #100
     3 2245			SLEEP_LOOP:
     4 2245 C5 14			cmp RTCLOCK_0
     5 2247 D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    46 					
    47 2249				DLI_ENABLE zx_dli_data_block
Macro: DLI_ENABLE [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2249 A9 ED 8D 00 02 A9 + 	mwa #ZX_DLI_DATA_BLOCK VDSLST
     2 2253 A9 C0			lda #$c0
     3 2255 8D 0E D4			sta NMIEN
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    48 2258				SLEEP 175
Macro: SLEEP [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2258 A5 14			lda RTCLOCK_0
     2 225A 18 69 AF			add #175
     3 225D			SLEEP_LOOP:
     4 225D C5 14			cmp RTCLOCK_0
     5 225F D0 FC			bne SLEEP_LOOP
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    49 2261				DLI_DISABLE
Macro: DLI_DISABLE [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2261 A9 40			lda #$40
     2 2263 8D 0E D4			sta NMIEN
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_load.asm
    50 					
    51 					
    52 					
    53 					
    16 					
    17 2266 60				rts
    18 				;	jmp zx_loop
    19 					
    20 				;	PM_SHOW
    21
    22 					
    15 2267				ICL 'zx_func.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_func.asm
     1 2267 00 00		zx_print_x: dta 0,0
     2 2269 00 00		zx_print_y: dta 0,0
     3 226B 00 00		zx_print_a: dta 0,0
     4
     5 226D			zx_print_func:
     6 226D 8E 67 22			stx zx_print_x 
     7 2270 8C 69 22			sty zx_print_y 
     8 2273 8D 6B 22			sta zx_print_a 
     9
    10 2276 A9 00 85 F3 A9 89 + 	mwa #image_data_zx_font src
    11 227E AD 00 8C 85 F5 AD + 	mwa screen_adr dst
    12 					
    13 2288 18 A5 F3 6D 6B 22 + 	ADW src zx_print_a
    14 2297 18 A5 F3 6D 6B 22 + 	ADW src zx_print_a
    15 22A6 18 A5 F3 6D 6B 22 + 	ADW src zx_print_a
    16 22B5 18 A5 F3 6D 6B 22 + 	ADW src zx_print_a
    17 22C4 18 A5 F3 6D 6B 22 + 	ADW src zx_print_a
    18 22D3 18 A5 F3 6D 6B 22 + 	ADW src zx_print_a
    19 22E2 18 A5 F3 6D 6B 22 + 	ADW src zx_print_a
    20 22F1 18 A5 F3 6D 6B 22 + 	ADW src zx_print_a
    21 					
    22 2300 A5 F6			lda dst+1
    23 2302 6D 69 22			adc zx_print_y
    24 2305 85 F6			sta dst+1
    25
    26 2307 18 A5 F5 6D 67 22 + 	ADW dst zx_print_x
    27 					
    28 2316 A2 08			ldx #8
    29 2318 A0 00			ldy #0
    30 231A			zx_print_func_loop:
    31 231A B1 F3			lda (src),y
    32 231C 91 F5			sta (dst),y
    33 231E E6 F3 D0 02 E6 F4		INW src
    34 2324 18 A5 F5 69 20 85 + 	ADW dst #32
    35 232F CA				dex
    36 2330 D0 E8			bne zx_print_func_loop
    37
    38 2332 60				rts
    39
    40 				.MACRO ZX_PRINT letter position_x position_y
    41 					lda #:letter
    42 					ldx #:position_x
    43 					ldy #:position_y
    44 					jsr zx_print_func
    45 				.ENDM
    46
    47 2333			zx_print_inv_func:
    48 2333 8D 6B 22			sta zx_print_a 
    49 2336 8E 67 22			stx zx_print_x 
    50 2339 8C 69 22			sty zx_print_y 
    51
    52 233C A9 00 85 F3 A9 89 + 	mwa #image_data_zx_font src
    53 2344 AD 00 8C 85 F5 AD + 	mwa screen_adr dst
    54 					
    55 234E 18 A5 F3 6D 6B 22 + 	ADW src zx_print_a
    56 235D 18 A5 F3 6D 6B 22 + 	ADW src zx_print_a
    57 236C 18 A5 F3 6D 6B 22 + 	ADW src zx_print_a
    58 237B 18 A5 F3 6D 6B 22 + 	ADW src zx_print_a
    59 238A 18 A5 F3 6D 6B 22 + 	ADW src zx_print_a
    60 2399 18 A5 F3 6D 6B 22 + 	ADW src zx_print_a
    61 23A8 18 A5 F3 6D 6B 22 + 	ADW src zx_print_a
    62 23B7 18 A5 F3 6D 6B 22 + 	ADW src zx_print_a
    63 					
    64 23C6 A5 F6			lda dst+1
    65 23C8 6D 69 22			adc zx_print_y
    66 23CB 85 F6			sta dst+1 
    67
    68 23CD 18 A5 F5 6D 67 22 + 	ADW dst zx_print_x
    69 					
    70 23DC A2 08			ldx #8
    71 23DE A0 00			ldy #0
    72 23E0			zx_print_inv_func_loop:
    73 23E0 B1 F3			lda (src),y
    74 23E2 49 FF			eor #$ff
    75 23E4 91 F5			sta (dst),y
    76 23E6 E6 F3 D0 02 E6 F4		INW src
    77 23EC 18 A5 F5 69 20 85 + 	ADW dst #32
    78 23F7 CA				dex
    79 23F8 D0 E6			bne zx_print_inv_func_loop
    80
    81 23FA 60				rts
    82
    83 				.MACRO ZX_PRINT_INV letter position_x position_y
    84 					lda #:letter
    85 					ldx #:position_x
    86 					ldy #:position_y
    87 					jsr zx_print_inv_func
    88 				.ENDM
    89
    90 						
    16 23FB				ICL 'func.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\func.asm
     1 				; copy 256 byte block from src to dst
     2
     3 23FB			memcopy_block_func:
     4 23FB				REG_PUSH
Macro: REG_PUSH [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 23FB 48				pha
     2 23FC 8A				txa
     3 23FD 48				pha
     4 23FE 98				tya
     5 23FF 48				pha
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\func.asm
     5
     6 2400 A0 00			ldy #0
     7 2402			memcopy_block_loop:	
     8 2402 B1 EF		 	lda (memcopy_block_src),y
     9 2404 91 F1		 	sta (memcopy_block_dst),y
    10 2406 C8			 	iny
    11 2407 D0 F9		 	bne memcopy_block_loop
    12
    13 2409			 	REG_PULL
Macro: REG_PULL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 2409 68				pla
     2 240A A8				tay
     3 240B 68				pla
     4 240C AA				tax
     5 240D 68				pla
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\func.asm
    14 240E 60			 	rts
    15
    16 				.MACRO MEMCOPY_BLOCK src dst
    17 					mwa #:src memcopy_block_src
    18 					mwa #:dst memcopy_block_dst
    19 					
    20 					jsr memcopy_block_func
    21 				.ENDM
    17 240F				ICL 'screen_mem.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\screen_mem.asm
     1 240F				org $4000
     2
     3 = 4000			screen_mem_1 = $4000
     4 4000-8C7F> 00 00 00 00 + 	:2048 dta $0
     5 = 4800			screen_mem_1_1 = $4800
     6 4800 00 00 00 00 00 00 + 	:2048 dta $0
     7 = 5000			screen_mem_1_2 = $5000
     8 5000 00 00 00 00 00 00 + 	:1792 dta $0
     9 5700			screen_mem_zx:
    10 5700 00 00 00 00 00 00 + 	:256 dta $0
    11 					
    12 				;	org $5800
    13 5800			screen_mem_2
    14 5800 00 00 00 00 00 00 + 	:2048 dta $0
    15 6000			screen_mem_2_1
    16 6000 00 00 00 00 00 00 + 	:2048 dta $0
    17 6800			screen_mem_2_2
    18 6800 00 00 00 00 00 00 + 	:2048 dta $0
    19
    20 = 5800			image_data_unicorn = $5800
    21 				;image_data_unicorn:
    22 7000				.local graphics
    23 7000 00 00 00 00 00 00 + 	ins "..\pic\unicorn2inv.gr8"
    24 					.endl
    25 8800			image_data_sinclair_research
    26 8800				.local graphics
    27 8800 3C 00 00 00 00 00 + 	ins "..\pic\sinclair_research.gr8"
    28 					.endl
    29 8900			image_data_zx_font
    30 8900				.local graphics
    31 8900 00 00 00 00 00 00 + 	ins "..\pic\zx_font.fnt"
    32 					.endl
    33
    34
    35 8C00			screen_adr
    36 8C00 00 00			dta 0,0
    37
    38 8C02			screen_clear:
    39 8C02				REG_PUSH
Macro: REG_PUSH [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 8C02 48				pha
     2 8C03 8A				txa
     3 8C04 48				pha
     4 8C05 98				tya
     5 8C06 48				pha
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\screen_mem.asm
    40 8C07 AD 00 8C 8D 1A 8C + 	mwa screen_adr screen_clear_loop_2+1
    41 8C13 A9 00			lda #0
    42 8C15 A2 18			ldx #24
    43 8C17			screen_clear_loop_1
    44 8C17 A0 00			ldy #0	
    45 8C19			screen_clear_loop_2	
    46 8C19 99 00 00			sta $0000,y
    47 8C1C C8				iny
    48 8C1D D0 FA			bne screen_clear_loop_2
    49 8C1F EE 1B 8C			inc screen_clear_loop_2+2
    50 8C22 CA				dex
    51 8C23 D0 F4			bne screen_clear_loop_2
    52 8C25				REG_PULL
Macro: REG_PULL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 8C25 68				pla
     2 8C26 A8				tay
     3 8C27 68				pla
     4 8C28 AA				tax
     5 8C29 68				pla
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\screen_mem.asm
    53 8C2A 60				rts	
    54
    55 8C2B			screen_fill:
    56 8C2B				REG_PUSH
Macro: REG_PUSH [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 8C2B 48				pha
     2 8C2C 8A				txa
     3 8C2D 48				pha
     4 8C2E 98				tya
     5 8C2F 48				pha
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\screen_mem.asm
    57 8C30 AD 00 8C 8D 43 8C + 	mwa screen_adr screen_fill_loop_2+1
    58 8C3C A9 FF			lda #255
    59 8C3E A2 18			ldx #24
    60 8C40			screen_fill_loop_1
    61 8C40 A0 00			ldy #0	
    62 8C42			screen_fill_loop_2	
    63 8C42 99 00 00			sta $0000,y
    64 8C45 C8				iny
    65 8C46 D0 FA			bne screen_fill_loop_2
    66 8C48 EE 44 8C			inc screen_fill_loop_2+2
    67 8C4B CA				dex
    68 8C4C D0 F4			bne screen_fill_loop_2
    69 8C4E				REG_PULL
Macro: REG_PULL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 8C4E 68				pla
     2 8C4F A8				tay
     3 8C50 68				pla
     4 8C51 AA				tax
     5 8C52 68				pla
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\screen_mem.asm
    70 8C53 60				rts	
    71
    72 					
    73 8C54			screen_set_read_1:
    74 					; load display list address to register
    75 8C54 A9 00 8D 30 02 A9 + 	mwa #dl_antic_1 DLIST
    76 8C5E 60				rts
    77 8C5F			screen_set_write_1:
    78 					; switch working buffer pointer
    79 8C5F A9 00 8D 00 8C A9 + 	mwa #screen_mem_1 screen_adr
    80 8C69 60				rts
    81
    82 8C6A			screen_set_read_2:
    83 					; load display list address to register
    84 8C6A A9 CC 8D 30 02 A9 + 	mwa #dl_antic_2 DLIST
    85 8C74 60				rts
    86 8C75			screen_set_write_2:	
    87 					; switch working buffer pointer
    88 8C75 A9 00 8D 00 8C A9 + 	mwa #screen_mem_2 screen_adr
    89 8C7F 60				rts
    90 					
    18 8C80				ICL 'display_list.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\display_list.asm
     1 8C80				ICL 'display_list_const.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\display_list_const.asm
     1 = 0012			RTCLOCK_2 = $12
     2 = 0013			RTCLOCK_1 = $13
     3 = 0014			RTCLOCK_0 = $14
     4
     5 = 0230			DLIST   = $230
     6 = 0230			DLISTL  = $230 ; display list pointer low byte
     7 = 0231			DLISTH  = $231 ;                      high byte
     8 = 02C8			COLRBK  = $2C8
     9
    10 = D016			COLPF0	= $D016  
    11 = D017			COLPF1	= $D017  
    12 = D018			COLPF2	= $D018  
    13 = D019			COLPF3	= $D019
    14 = D01A			COLBG	= $D01A 
    15
    16 = 02C4			COLOR0	= $02C4
    17 = 02C5			COLOR1	= $02C5
    18 = 02C6			COLOR2	= $02C6
    19 = 02C7			COLOR3	= $02C7
    20 = 02C8			COLOR4 	= $02C8
    21
    22 = 022F			SDMCTL  = $022F
    23 = 022F			DMACTLS = $022F
    24 = D400			DMACTL  = $D400
    25 = 0200			VDSLST  = $0200 ; display list interrupt vector
    26 = D40E			NMEN	= $D40E
    27 = D40E			NMIEN	= $D40E ; bit 7
    28 = D40A			WSYNC   = $D40A
    29 = D40B			VCOUNT  = $D40B
    30
    31 = 02C5			GR8_PEN   = COLOR1
    32 = 02C6			GR8_PAPER = COLOR2
    33 = 02C8			GR8_FRAME = COLOR4 
    34
    35 = D017			DLI_PEN   = COLPF1
    36 = D018			DLI_PAPER = COLPF2
    37 = D01A			DLI_FRAME = COLBG 
    38
    39 = 0000			COLOR_BLACK = $00
    40 = 000E			COLOR_WHITE = $0E
    41 = 00AC			COLOR_CYAN  = $ac
    42 = 0043			COLOR_RED   = $43
    43
    44 = D012			COLPM0	= $D012
    45 = D013			COLPM1	= $D013
    46 = D014			COLPM2	= $D014
    47 = D015			COLPM3	= $D015
    48
    49 = 02C0			COLPM0S	= $02C0
    50 = 02C1			COLPM1S	= $02C1
    51 = 02C2			COLPM2S	= $02C2
    52 = 02C3			COLPM3S	= $02C3
    53
    54
    55 = D008			SIZEP0	= $D008
    56 = D009			SIZEP1	= $D009
    57 = D00A			SIZEP2	= $D00A
    58 = D00B			SIZEP3	= $D00B
    59
    60 = D00C			SIZEM	= $D00C
    61
    62 = D000			HPOSP0	= $D000
    63 = D001			HPOSP1	= $D001
    64 = D002			HPOSP2	= $D002
    65 = D003			HPOSP3	= $D003
    66
    67 = D004			HPOSM0	= $D004
    68 = D005			HPOSM1	= $D005
    69 = D006			HPOSM2	= $D006
    70 = D007			HPOSM3	= $D007
    71
    72 = D01C			VDELAY	= $D01C
    73
    74 = D01B			GTIACTL	= $D01B
    75 = 026F			GTIACTLS = $026F
    76
    77 = D01D			PMCTL	= $D01D
    78
    79 = D407			PMBASE = $D407
    80
    81 				;     SAVMSC $0058,2       (88): pointer to current screen for CIO commands
    82 				;     RAMTOP $006A        (106): start-of-ROM pointer (MSB only)
    83 				;     VDSLST $0200,2      (512): DLI vector
    84 				;     RAMSIZ $02E4        (740): permanent start-of-ROM pointer (MSB only)
    85 				;     DLISTL $D402      (54274): display list pointer low byte
    86 				;     DLISTH $D403      (54275):     "    high byte
    87 				;     HSCROL $D404      (54276): horizontal scroll register
    88 				;     VSCROL $D405      (54277): vertical scroll register
    89 				;     NMIEN  $D40E      (54286): NMI enable (DLIs)
    90 				;     
    91 				;     
    92 				;                               Shadow registers
    93 				;     
    94 				;     
    95 				;     SDLSTL $0230        (560): DLISTL
    96 				;     SDLSTH $0231        (561): DLISTH
     2
     3 8C80				org $3800
     4
     5 = 0080			DL_DLI = $80
     6
     7 				; DL for first buffer	
     8 3800-39C8> F0 70 70	dl_antic_1	dta $F0,$70,$70              ; 3x8 empty scanlines
     9 3803 4F 00 40				dta b($4f),a(screen_mem_1)   ; $0f - mode, $40 - addr of 1/3 screen bitmap 
    10 3806 0F 0F 0F 0F 0F 0F + 		:62 dta b($0f)               ; 63 lines of $0f 
    11 3844 0F					dta b($0f)                   ; 1 line of $0f + DLI 
    12 3845 4F 00 48				dta b($4f),a(screen_mem_1_1) ; $0f - mode, $40 - addr of 2/3 screen bitmap
    13 3848 0F 0F 0F 0F 0F 0F + 		:63 dta b($0f)	             ; 63 lines of $0f 
    14 3887 4F 00 50				dta b($4f),a(screen_mem_1_2) ; $0f - mode, $40 - addr of 3/3 screen bitmap
    15 388A 0F 0F 0F 0F 0F 0F + 		:63 dta b($0f)               ; 63 lines of $0f
    16 						;dta b($c1),a(dl_antic_1)     ; jump to DL start and trigger interrupt
    17 38C9 41 00 38				dta b($41),a(dl_antic_1)     ; jump to DL start
    18 38CC 70 70 70		dl_antic_2	dta $70,$70,$70              ; 3x8 empty scanlines 
    19 38CF CF 00 58				dta b($cf),a(screen_mem_2)   ; $0f - mode, $40 - addr of 1/3 screen bitmap
    20 38D2 0F 0F 0F 0F 0F 0F + 		:63 dta b($0f)               ; 63 lines of $0f 
    21 3911 4F 00 60				dta b($4f),a(screen_mem_2_1) ; $0f - mode, $40 - addr of 2/3 screen bitmap
    22 3914 0F 0F 0F 0F 0F 0F + 		:63 dta b($0f)	             ; 63 lines of $0f 
    23 3953 4F 00 68				dta b($4f),a(screen_mem_2_2) ; $0f - mode, $40 - addr of 3/3 screen bitmap
    24 3956 0F 0F 0F 0F 0F 0F + 		:63 dta b($0f)               ; 63 lines of $0f 
    25 						;dta b($c1),a(dl_antic_2)     ; jump to DL start and trigger interrupt
    26 3995 41 CC 38				dta b($41),a(dl_antic_2)     ; jump to DL start 
    27
    28 3998			dl_set_mode
    29 					; set screen width to 32 byte
    30 				;	lda #%11111100
    31 				;	and DMACTLS
    32 				;	ora #%00000001
    33 3998 A9 39			lda #57
    34 399A 8D 2F 02			sta DMACTLS
    35
    36 399D A9 00			lda #COLOR_BLACK     
    37 399F 8D C5 02			sta GR8_PEN
    38 39A2 A9 00			lda #COLOR_BLACK     
    39 39A4 8D C6 02			sta GR8_PAPER
    40 39A7 A9 00			lda #COLOR_BLACK     
    41 39A9 8D C8 02			sta GR8_FRAME
    42 					
    43 39AC A9 0E			lda #COLOR_WHITE
    44 39AE 8D C5 02			sta COLOR1
    45 39B1 A9 00			lda #COLOR_BLACK
    46 39B3 8D C6 02			sta COLOR2
    47 					
    48
    49 39B6 60				rts
    50
    51 						
    19 39B7				ICL 'wait_vsync.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\wait_vsync.asm
     1
     2
     3 39B7			wait_hsync:
     4
     5 39B7 48				pha
     6
     7 39B8 A9 52			lda #$52
     8 39BA 8D 0A D4			sta WSYNC	;WAIT
     9 39BD 68				pla
    10
    11 39BE 60				rts
    12
    13
    14 39BF			wait_vsync:
    15 39BF 48				pha
    16 39C0			wait_vsync_loop:
    17 39C0 AD 0B D4			lda VCOUNT
    18 39C3 C9 64			cmp #100
    19 39C5 D0 F9			bne wait_vsync_loop 
    20 					
    21 39C7 68				pla
    22 39C8 60				rts
    23 					
    20 39C9				ICL 'math.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\math.asm
     1 39C9				org $1D00
     2 					
     3 				;MATH_SIN_LEN = 16
     4 				;MATH_SIN_MASK = %00001111	
     5 				; math_sin dta 127,176,218,245,255,245,218,176,127,78,36,9,0,9,36,78
     6 				; math_sin dta 128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79
     7 				        
     8 				;MATH_SIN_LEN = 64
     9 				;MATH_SIN_MASK = %00111111	
    10 				;math_sin dta 128,140,152,165,176,188,198,208,218,226,234,240,245,250,253,254,255,254,253,250,245,240,234,226,218,208,198,188,176,165,152,140,128,115,103,90,79,67,57,47,37,29,21,15,10,5,2,1,0,1,2,5,10,15,21,29,37,47,57,67,79,90,103,115
    11
    12 = 0100			MATH_SIN_LEN = 256
    13 = 00FF			MATH_SIN_MASK = %11111111	
    14 1D00-1F0F> 80 83 86 89 + math_sin dta 128,131,134,137,140,143,146,149,152,155,158,162,165,167,170,173,176,179,182,185,188,190,193,196,198,201,203,206,208,211,213,215,218,220,222,224,226,228,230,232,234,235,237,238,240,241,243,244,245,246,248,249,250,250,251,252,253,253,254,254,254,255,0,0,0,0,0,255,254,254,254,253,253,252,251,250,250,249,248,246,245,244,243,241,240,238,237,235,234,232,230,228,226,224,222,220,218,215,213,211,208,206,203,201,198,196,193,190,188,185,182,179,176,173,170,167,165,162,158,155,152,149,146,143,140,137,134,131,128,124,121,118,115,112,109,106,103,100,97,93,90,88,85,82,79,76,73,70,67,65,62,59,57,54,52,49,47,44,42,40,37,35,33,31,29,27,25,23,21,20,18,17,15,14,12,11,10,9,7,6,5,5,4,3,2,2,1,1,1,0,0,0,0,0,0,0,1,1,1,2,2,3,4,5,5,6,7,9,10,11,12,14,15,17,18,20,21,23,25,27,29,31,33,35,37,40,42,44,47,49,52,54,57,59,62,65,67,70,73,76,79,82,85,88,90,93,97,100,103,106,109,112,115,118,121,124
    15
    16 = 0010			MATH_SIN_LEN_16 = 16
    17 = 000F			MATH_SIN_MASK_16 = %00001111	
    18 1E00 80 B0 DA F5 FF F5 + math_sin_16 dta 128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79,128,176,218,245,255,245,218,176,128,79,37,10,0,10,37,79
    19
    20 1F00 C0 C0 60 40 30 27 + math_192_div dta 192,192,96,64,48,39,32,28,24,22,20,18,16,15,14,13
    21 1F10				ICL 'zero.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zero.asm
     1 1F10				org $e0
     2
     3 00E0-00F8> 00		zero_a	dta 0
     4 00E1 00			zero_x	dta 0
     5 00E2 00			zero_y	dta 0
     6 00E3 00			zero_1	dta 0
     7 00E4 00			zero_2	dta 0
     8 00E5 00			zero_3	dta 0
     9 00E6 00			bar_size dta 0
    10 00E7 00			bar_color1 dta 0
    11 00E8 00			bar_color2 dta 0
    12 00E9 00			bar_color10 dta 0
    13 00EA 00			bar_color20 dta 0
    14 00EB			part1_image_data_address: 
    15 00EB 00 00			dta 0,0
    16 00ED			part1_screen_data_address: 
    17 00ED 00 00			dta 0,0
    18 00EF			memcopy_block_src:
    19 00EF 00 00			dta 0,0
    20 00F1			memcopy_block_dst:
    21 00F1 00 00			dta 0,0
    22 00F3			src:
    23 00F3 00 00			dta 0,0
    24 00F5			dst:
    25 00F5 00 00			dta 0,0
    26 00F7			tmp_word:
    27 00F7 00 00			dta 0,0
    28 					
    22 00F9				ICL 'ghosts.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\ghosts.asm
     1 00F9				org $6000
     2
     3 6000			pm_base:
     4 6000-6A26> FF FF FF FF + 	:768 dta $FF
     5 6300			pm_missle:
     6 6300 FF FF FF FF FF FF + 	:256 dta $FF
     7 6400			pm_player0:
     8 6400 FF FF FF FF FF FF + 	:256 dta $FF
     9 6500			pm_player1:
    10 6500 FF FF FF FF FF FF + 	:256 dta $FF
    11 6600			pm_player2:
    12 6600 FF FF FF FF FF FF + 	:256 dta $FF
    13 6700			pm_player3:
    14 6700 FF FF FF FF FF FF + 	:256 dta $FF
    15 					
    16 				.MACRO PM_SHOW
    17 				
    18 				;	lda #$60
    19 				;	sta PMBASE
    20 				;	lda #0
    21 				;	sta SIZEP0
    22 				;	lda #COLOR_WHITE
    23 				;	sta COLPM0
    24 				;	sta COLPM0S
    25 				;	lda #100
    26 				;	sta HPOSP0
    27 				;	lda #3
    28 				;	sta PMCTL
    29 				;	lda #1
    30 				;	sta GTIACTL
    31 				
    32 				;	lda DMACTLS
    33 				;	ora #%00011000
    34 				;	sta DMACTLS
    35 				
    36 				
    37 					lda #$60
    38 					sta 54279	; PMBASE
    39 				
    40 					lda #1
    41 					sta 623		; GTIACTL
    42 				
    43 					lda #14
    44 					sta 704		; KOLOR
    45 				
    46 					; szerokoœæ
    47 					lda #0
    48 					sta SIZEP0	; SIZEP0
    49 					lda #1
    50 					sta SIZEP1	; SIZEP0
    51 					lda #1
    52 					sta SIZEP2	; SIZEP0
    53 					lda #0
    54 					sta SIZEP3	; SIZEP0
    55 				
    56 					lda #2
    57 					sta 53277	; PMCTL
    58 				
    59 					lda #57
    60 					sta 559		; DMACTLS
    61 				
    62 					; 64 - begin
    63 					; 4,8,12,16
    64 					lda #68
    65 					sta HPOSP0 
    66 				
    67 					lda #88
    68 					sta HPOSP1 
    69 				
    70 					lda #150
    71 					sta HPOSP2 
    72 				
    73 					lda #180
    74 					sta HPOSP3 
    75 				
    76 				.ENDM
    77
    78 				.MACRO PM_MOVE
    79 					lda RTCLOCK_0
    80 					sta 53248
    81 				.ENDM
    82
    23 6800				ICL 'part1.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     1 6800 00			part1_x dta 0
     2 6801 00			part1_y dta 0
     3 6802 00			part1_d dta 0
     4 6803 00			TMPCLR dta 0
     5
     6 6804 00			part1_tmpx dta 0
     7 6805 00			part1_tmpy dta 0
     8 6806 00			part1_sync: dta 0
     9
    10
    11 6807			part1:
    12 					; set handler for display list interrupt 
    13 6807				DLI_ENABLE part1_dli_handler
Macro: DLI_ENABLE [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 6807 A9 34 8D 00 02 A9 + 	mwa #PART1_DLI_HANDLER VDSLST
     2 6811 A9 C0			lda #$c0
     3 6813 8D 0E D4			sta NMIEN
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
    14
    15 6816 A9 00			lda #COLOR_BLACK     
    16 6818 8D C5 02			sta GR8_PEN
    17 681B A9 0E			lda #COLOR_WHITE     
    18 681D 8D C6 02			sta GR8_PAPER
    19 6820 A9 0E			lda #COLOR_WHITE     
    20 6822 8D C8 02			sta GR8_FRAME
    21
    22 6825 20 75 8C			jsr screen_set_write_2
    23 				;	jsr screen_clear
    24 				;	jsr screen_fill
    25 6828 20 6A 8C			jsr screen_set_read_2
    26 					
    27 				;	PM_SHOW
    28
    29
    30 682B			part1_0:
    31
    32 					
    33 682B			part1_0_idle:
    34 					
    35 					;PM_MOVE
    36 					
    37 682B 4C 2B 68			jmp part1_0_idle
    38 					
    39 682E				REG_PULL
Macro: REG_PULL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 682E 68				pla
     2 682F A8				tay
     3 6830 68				pla
     4 6831 AA				tax
     5 6832 68				pla
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
    40
    41 6833 60				rts
    42
    43 6834			part1_dli_handler:
    44
    45 				; line:
    46 				; 32 cycles - frame (2+26+4)
    47 				; 28 cycles - screen
    48
    49 6834				REG_PUSH
Macro: REG_PUSH [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 6834 48				pha
     2 6835 8A				txa
     3 6836 48				pha
     4 6837 98				tya
     5 6838 48				pha
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
    50 6839 A9 00			lda #COLOR_BLACK
    51 683B 8D 18 D0			sta DLI_PAPER ; black
    52 683E A5 01			lda 1
    53 6840 8D 12 D0			sta COLPM0
    54
    55
    56 					; bar size
    57 6843 A9 02			lda #2
    58 6845 85 E6			sta bar_size
    59
    60 6847 8D 0A D4			:1 sta WSYNC	;WAIT
    61 					
    62 					; cycle begin
    63 684A A2 01			ldx #1
    64 684C 8D 0A D4			:1 sta WSYNC	;WAIT
    65
    66 				;	lda math_sin_16,x
    67 				;	:4 lsr
    68 				;	adc #1
    69 				;	tax
    70
    71 684F 8D 0A D4			:1 sta WSYNC
    72 					
    73 6852 A5 13			lda RTCLOCK_1
    74 6854 8D C0 02			sta 704		; KOLOR
    75
    76 6857 8D 0A D4 8D 0A D4 + 	:18 sta WSYNC	;WAIT
    77
    78 					; init color value
    79 688D A4 14			ldy RTCLOCK_0
    80 688F B9 00 1D			lda math_sin,y
    81 6892 85 E7			sta bar_color1
    82 6894 98				tya
    83 6895 49 FF			eor #$ff
    84 6897 A8				tay
    85 6898 B9 00 1D			lda math_sin,y
    86 689B 85 E8			sta bar_color2
    87
    88 689D 8D 0A D4			:1 sta WSYNC	;WAIT
    89
    90 					; 192 screen lines
    91
    92
    93 68A0 A6 E7			ldx bar_color1
    94 68A2 A4 E8			ldy bar_color2
    95
    96 68A4				LINE_NOP_NORMAL
Macro: LINE_NOP_NORMAL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 68A4 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     1 68A7 CA				dex
     2 68A8 88				dey
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     3 68A9 8C 12 D0			sty COLPM0
     4 68AC 8C 13 D0			sty COLPM1
     5 68AF 8E 14 D0			stx COLPM2
     6 68B2 8E 15 D0			stx COLPM3
     7 68B5 8E 18 D0			stx DLI_PAPER	; 4 cycles
     1 68B8 EA				nop
     2 68B9 EA				nop
     3 68BA EA				nop
     4 68BB EA				nop
     5 68BC EA				nop
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     9 68BD EA				nop
    10 68BE 8C 18 D0			sty DLI_PAPER	; 4 cycles
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
    97 68C1				LINE_NOP_NORMAL
Macro: LINE_NOP_NORMAL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 68C1 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     1 68C4 CA				dex
     2 68C5 88				dey
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     3 68C6 8C 12 D0			sty COLPM0
     4 68C9 8C 13 D0			sty COLPM1
     5 68CC 8E 14 D0			stx COLPM2
     6 68CF 8E 15 D0			stx COLPM3
     7 68D2 8E 18 D0			stx DLI_PAPER	; 4 cycles
     1 68D5 EA				nop
     2 68D6 EA				nop
     3 68D7 EA				nop
     4 68D8 EA				nop
     5 68D9 EA				nop
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     9 68DA EA				nop
    10 68DB 8C 18 D0			sty DLI_PAPER	; 4 cycles
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
    98
    99 68DE A9 39			lda #57
   100 68E0			dli_handler_loop_0:
   101 68E0				LINE_NOP_NORMAL
Macro: LINE_NOP_NORMAL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 68E0 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     1 68E3 CA				dex
     2 68E4 88				dey
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     3 68E5 8C 12 D0			sty COLPM0
     4 68E8 8C 13 D0			sty COLPM1
     5 68EB 8E 14 D0			stx COLPM2
     6 68EE 8E 15 D0			stx COLPM3
     7 68F1 8E 18 D0			stx DLI_PAPER	; 4 cycles
     1 68F4 EA				nop
     2 68F5 EA				nop
     3 68F6 EA				nop
     4 68F7 EA				nop
     5 68F8 EA				nop
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     9 68F9 EA				nop
    10 68FA 8C 18 D0			sty DLI_PAPER	; 4 cycles
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
   102 68FD E9 01			sbc #1
   103 68FF D0 DF			bne dli_handler_loop_0
   104
   105 6901				LINE_NOP_SHORT
Macro: LINE_NOP_SHORT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 6901 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     1 6904 CA				dex
     2 6905 88				dey
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     3 6906 8C 12 D0			sty COLPM0
     4 6909 8C 13 D0			sty COLPM1
     5 690C 8E 14 D0			stx COLPM2
     6 690F 8E 15 D0			stx COLPM3
     7 6912 8E 18 D0			stx DLI_PAPER	; 4 cycles
     1 6915 EA				nop
     2 6916 EA				nop
     3 6917 EA				nop
     4 6918 EA				nop
     5 6919 EA				nop
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     9 691A 8C 18 D0			sty DLI_PAPER	; 4 cycles
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
   106
   107 691D A9 3F			lda #63
   108 691F			dli_handler_loop_1:
   109 691F				LINE_NOP_NORMAL
Macro: LINE_NOP_NORMAL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 691F 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     1 6922 CA				dex
     2 6923 88				dey
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     3 6924 8C 12 D0			sty COLPM0
     4 6927 8C 13 D0			sty COLPM1
     5 692A 8E 14 D0			stx COLPM2
     6 692D 8E 15 D0			stx COLPM3
     7 6930 8E 18 D0			stx DLI_PAPER	; 4 cycles
     1 6933 EA				nop
     2 6934 EA				nop
     3 6935 EA				nop
     4 6936 EA				nop
     5 6937 EA				nop
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     9 6938 EA				nop
    10 6939 8C 18 D0			sty DLI_PAPER	; 4 cycles
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
   110 693C E9 01			sbc #1
   111 693E D0 DF			bne dli_handler_loop_1
   112 6940				LINE_NOP_SHORT
Macro: LINE_NOP_SHORT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 6940 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     1 6943 CA				dex
     2 6944 88				dey
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     3 6945 8C 12 D0			sty COLPM0
     4 6948 8C 13 D0			sty COLPM1
     5 694B 8E 14 D0			stx COLPM2
     6 694E 8E 15 D0			stx COLPM3
     7 6951 8E 18 D0			stx DLI_PAPER	; 4 cycles
     1 6954 EA				nop
     2 6955 EA				nop
     3 6956 EA				nop
     4 6957 EA				nop
     5 6958 EA				nop
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     9 6959 8C 18 D0			sty DLI_PAPER	; 4 cycles
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
   113
   114 695C A9 3F			lda #63
   115 695E			dli_handler_loop_2:
   116 695E				LINE_NOP_NORMAL
Macro: LINE_NOP_NORMAL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 695E 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     1 6961 CA				dex
     2 6962 88				dey
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     3 6963 8C 12 D0			sty COLPM0
     4 6966 8C 13 D0			sty COLPM1
     5 6969 8E 14 D0			stx COLPM2
     6 696C 8E 15 D0			stx COLPM3
     7 696F 8E 18 D0			stx DLI_PAPER	; 4 cycles
     1 6972 EA				nop
     2 6973 EA				nop
     3 6974 EA				nop
     4 6975 EA				nop
     5 6976 EA				nop
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     9 6977 EA				nop
    10 6978 8C 18 D0			sty DLI_PAPER	; 4 cycles
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
   117 697B E9 01			sbc #1
   118 697D D0 DF			bne dli_handler_loop_2
   119 				;	LINE_NOP_SHORT
   120 					
   121 697F				LINE_NOP_LAST
Macro: LINE_NOP_LAST [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 697F 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     2 6982 8E 18 D0			stx DLI_PAPER	; 4 cycles
     3 6985 A9 01			lda #1
     4 6987 8D 12 D0			sta COLPM0
     5 698A 8D 13 D0			sta COLPM1
     6 698D 8D 14 D0			sta COLPM2
     7 6990 8D 15 D0			sta COLPM3
     1 6993 EA				nop
     2 6994 EA				nop
     3 6995 EA				nop
     4 6996 EA				nop
     5 6997 EA				nop
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
     9 6998 EA				nop
    10 6999 8C 18 D0			sty DLI_PAPER	; 4 cycles
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
   122
   123 699C A5 01			lda 1
   124 699E 8D 12 D0			sta COLPM0
   125 69A1 8D 13 D0			sta COLPM1
   126 69A4 8D 14 D0			sta COLPM2
   127 69A7 8D 15 D0			sta COLPM3
   128
   129 69AA				LINE_WAIT
Macro: LINE_WAIT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 69AA 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
   130 					
   131
   132 69AD				REG_PULL
Macro: REG_PULL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 69AD 68				pla
     2 69AE A8				tay
     3 69AF 68				pla
     4 69B0 AA				tax
     5 69B1 68				pla
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\part1.asm
   133 69B2 40				rti
   134 					
   135 					
   136 					
    24 69B3				ICL 'zx_dli.asm'
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_dli.asm
     1
     2 69B3			zx_dli_header_block:
     3
     4 69B3				REG_PUSH
Macro: REG_PUSH [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 69B3 48				pha
     2 69B4 8A				txa
     3 69B5 48				pha
     4 69B6 98				tya
     5 69B7 48				pha
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_dli.asm
     5
     6 					; 192 screen lines
     7 69B8 A0 F0			ldy #240
     8 69BA			zx_dli_header_block_loop1:	
     9 69BA B1 14			lda (RTCLOCK_0),y
    10 69BC 69 05			adc #5
    11 69BE 29 0F			and #$0f
    12 69C0 A2 43			ldx #COLOR_RED
    13 69C2 8E 1A D0			stx DLI_FRAME
    14 69C5			zx_dli_header_block_loop2:	
    15 69C5				LINE_WAIT
Macro: LINE_WAIT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 69C5 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_dli.asm
    16 69C8 88				dey
    17 69C9 F0 1C			beq zx_dli_header_block_end
    18 69CB E9 01			sbc #1
    19 69CD D0 F6			bne zx_dli_header_block_loop2
    20
    21 69CF			zx_dli_header_block_loop3:	
    22 69CF B1 14			lda (RTCLOCK_0),y
    23 69D1 69 05			adc #5
    24 69D3 29 0F			and #$0f
    25 69D5 A2 AC			ldx #COLOR_CYAN
    26 69D7 8E 1A D0			stx DLI_FRAME
    27 69DA			zx_dli_header_block_loop4:	
    28 69DA				LINE_WAIT
Macro: LINE_WAIT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 69DA 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_dli.asm
    29 69DD 88				dey
    30 69DE F0 07			beq zx_dli_header_block_end
    31 69E0 E9 01			sbc #1
    32 69E2 D0 F6			bne zx_dli_header_block_loop4
    33 69E4 4C BA 69			jmp zx_dli_header_block_loop1
    34
    35 69E7			zx_dli_header_block_end:
    36 69E7				REG_PULL
Macro: REG_PULL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 69E7 68				pla
     2 69E8 A8				tay
     3 69E9 68				pla
     4 69EA AA				tax
     5 69EB 68				pla
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_dli.asm
    37 69EC 40				rti
    38 					
    39 				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    40
    41 69ED			zx_dli_data_block:
    42
    43 69ED				REG_PUSH
Macro: REG_PUSH [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 69ED 48				pha
     2 69EE 8A				txa
     3 69EF 48				pha
     4 69F0 98				tya
     5 69F1 48				pha
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_dli.asm
    44
    45 					; 192 screen lines
    46 69F2 A0 F0			ldy #240
    47 69F4			zx_dli_data_block_loop1:	
    48 69F4 B1 13			lda (RTCLOCK_1),y
    49 69F6 69 03			adc #3
    50 69F8 29 07			and #$07
    51 69FA A2 43			ldx #COLOR_RED
    52 69FC 8E 1A D0			stx DLI_FRAME
    53 69FF			zx_dli_data_block_loop2:	
    54 69FF				LINE_WAIT
Macro: LINE_WAIT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 69FF 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_dli.asm
    55 6A02 88				dey
    56 6A03 F0 1C			beq zx_dli_data_block_end
    57 6A05 E9 01			sbc #1
    58 6A07 D0 F6			bne zx_dli_data_block_loop2
    59
    60 6A09			zx_dli_data_block_loop3:	
    61 6A09 B1 14			lda (RTCLOCK_0),y
    62 6A0B 69 05			adc #5
    63 6A0D 29 0F			and #$0f
    64 6A0F A2 AC			ldx #COLOR_CYAN
    65 6A11 8E 1A D0			stx DLI_FRAME
    66 6A14			zx_dli_data_block_loop4:	
    67 6A14				LINE_WAIT
Macro: LINE_WAIT [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 6A14 8D 0A D4			sta WSYNC	;WAIT
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_dli.asm
    68 6A17 88				dey
    69 6A18 F0 07			beq zx_dli_data_block_end
    70 6A1A E9 01			sbc #1
    71 6A1C D0 F6			bne zx_dli_data_block_loop4
    72 6A1E 4C F4 69			jmp zx_dli_data_block_loop1
    73
    74 6A21			zx_dli_data_block_end:
    75 6A21				REG_PULL
Macro: REG_PULL [Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\macro.asm]
     1 6A21 68				pla
     2 6A22 A8				tay
     3 6A23 68				pla
     4 6A24 AA				tax
     5 6A25 68				pla
Source: C:\jac\wudsn\Workspace\Atari800\asm_t2\zx1\zx_dli.asm
    76 6A26 40				rti
    77 					
    78 					
    79 						
    80 					
    81 					
    82 					
    83 					
    84 					
    85 					
    25
